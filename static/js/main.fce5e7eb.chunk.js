(this["webpackJsonpdelivery-app"]=this["webpackJsonpdelivery-app"]||[]).push([[0],{34:function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAASIAAAEiCAYAAABdvt+2AAAACXBIWXMAAAsSAAALEgHS3X78AAANg0lEQVR4nO3dQZITRxoG0OwJ9hDaK8wstMY+AfgE5gbGJxh8AjMnGDiB2zfAJ5jmBANrbSC015gT9ETZ1R6ZAEndlZV/ZtZ7EYQXYHV1tvR1ZWXWVxfX19cJINK94WtfXFw8Tym99ZMAItwbv+bb6+vrKz8BoLSLi4snfzPqQDRBBIQTREA4QQSEE0RAOEEEhBNEQDhBBIQTREA4QQSEE0RAOEEEhBNEQDhBBIQTREA4QQSEE0RAOEEEhBNEQDhBBIQTREA4QQSEE0RAOEEEhBNEQDhBBIQTREA4QQSEE0RAOEEEhBNEQDhBBIQTREA4QQSEE0RAOEEEhBNEQDhBBIQTREA4QQSEE0RAOEEEhBNEQDhBBIQTREA4QQSEE0RAOEEEhBNEQDhBBIQTREA4QQSEu+dHQA32683DlNKzHIey2m1fHPv7/XrzPqX0VeM/+Hcppbfjn6vVbvu2gmO6M0FELYYQ+inDsQwf0KNB1EEIDR6Nf75Pf4Trh5TSZUrp5Wq3/S3+8G7H1IxaPMx0HO+P/eV+vXnS6U/8qzHI/7tfby73682DCo7pbIKIWuQKolNTlFxfp2bDWdL7/XrzvJUDFkTU4nGm4zgVRF8v5Cd+P6X0r/16c9XC2ZEgItx+vckZDoLor4aAv8o8xtkJImqQbbq02m2PXiNaYBCl8aJ21WEkiKhBrg/Im2N/OU5R7i/0Jz58369rnaYJImqQK4icDR03rKy9rvHABBE1yBUQp64P9bp0fxuP9+vNqX1WxQkiapBrg6Gl+/P8NO5kr4YgIlTmDYaC6HxVnRUJIqLlCoePZ9zakGuvUg++r+msSBARrcj1odqmIpWoZue1ICJariC6OvH3S18x+5wsbQc5CCKiWbqPc7+Wm4AFEWEybzAURHcjiFi8bOGw2m1PTc1cI/q8KoJIMRqRcn0I3p3xbx5l+Do35WMlPDz4M2eRWxVnioKISK2Vob0+VUM7h/Fm1eHrfjfDy1dx752pGZFaK0M7dR1qFkMf9Wq3fZpS+mGO16/hRlhBRKRSZWilAm9Wq912mBb+OMPXCJ+eCSJCFC5DyzU1C39Sxmq3fXmq7qRFgogorZWhfajo6Ri5L5iHf1+CiCitlaGFXB/6glNbFW6lhmeiCSKitLajOuuHf4ozzgCbI4iIUqoMrVTgteqcPVizE0REKVWGVirwisncJFBFwAoiimuxDK2yZ8vnDKIqvi9BRITWytCqmL4cKBnkRQgiIrRWhlbb9SFTM8igtTK0mqZlKXNrgTMiFsvS/TQ5mgRSTTu0BRFFNVqGVs3ULPOtMdV8X4KI0porQ6tsA2F314eSICJArhWfD2f8mxxTmNpuMM15RlTNlFMQUVqRSo6Me5Vqu1Dd3dJ9EkQEUIY2Tck9WMUIIkpThjZNqVtjihJEFFP4HqnupmaFb40pShBRUsmNeL2VoaXMF6oFEYulDG2aLpfukyCiMDuqpym5B6soQURJpVayei1Dy/V9nbMHqyhBREm57pFa3M2u44X+XLfG1LYSKIgoQxnaZN2VoR0SRJSiDG2abpfukyCioFK3dthRfVp1DwIQRJRSaoOhMrQTKpty/k4QUUprjw9ShlaQIGJ2ytCm6bUM7ZAgogRlaNN0fX0oCSIKKbkRTxnacbVNOX8niCih1OODlKGdVt2F6iSIKEQZ2jRdlqEdEkSUoAxtmi7L0A4JImalDG2ansvQDgki5qYMbZpuy9AOCSLmpgxtmu6X7pMgogBlaNN0W4Z2SBAxN2Vo03RbhnZIEDE3ZWh31HsZ2iFBxGyUoU3WdRnaoXv1HAodaq0M7eN+vXmR4XVyWcTSfRJEzKy1MrRhGvRTpteqTbUrZsnUjJm1VobWrRrL0A4JIubUWhlar6osQzskiJhFo2Vovap6WpYEETNqrgytY4KIxWqtDK1n1e6oviGImEtrZWg9q/pCdRJEzKi1MrReVVuGdkgQMZfWytB6Vf3ZUBJEzKHRMrReCSIWq7UytJ4JIhartTK0nlW/dJ8EETNprQytWzWXoR0SRMyhtTK0XlVdhnZIEDGH1srQetXE9aEkiMitxTK0jgkiFqu1MrSeCSIWq7UytJ41sWKWBBEzUIZWidrL0A4JInJThlaH6svQDgkislGGVpVmpmVJEJGZMrR6CCIWSxlaPZrYUX1DEJGTMrR6NHOhOgkiMlOGVocmytAOCSJyUoZWh6bOhpIgIhdlaFURRCyWMrR6CCIWSxlaPZpauk+CiIyUoVWilTK0Q4KIXJSh1aGZMrRDgohclKHVobnrQ0kQkYMytKoIIhZLGVo9BBGLpQytHs2tmA3ulf6C+/XmWaY37lWLqwOdUoZWiZbK0A4VD6KU0ouU0leZXksQ1UEZWh2aKkM7FDE1yxVCVEAZWlWanJalxq8RPajgGFCGVhNBdI7xt2cubnysgzK0ejR7qaL0GVHO32iPFGRVQRlaPZq8UJ1KB9EMV/RfZj7L4vaUodWhuTK0Q63vIxpO1a+EUShlaHVo9mwodbKhcQijt+P+JApShlaVpoMoYh/Rmxm26Q9bAn7erzc/H+ylsMdoftmCSBnaZILolt7OfL/Q40/+S/2UoU3X7NJ9CpqaOVPhUzYyTtT67U6CiBoIommaLEM7VDyIxiXGX0t/XaqmDG2apq8PpcBVs8ugr0udLN1PI4juYrXbvu7hdJIslKFNJ4gmeBH4tamHMrTpml4xS5FBtNptL1vuTyEb07KJWi1DOxS9s3rYDf0x+BiIdepDZEf1ce9qPrhzhQbRarcdTimfRx4D4SzdT9P82VCq4V6zcYr2Y/RxEEMZ2mRd7Mur4qbX1W77MqX0qoJDoSxlaNMMlzVet/wN3Kjm7vvVbjtM0X6o4FAo59SKmWnZcS9a7iA6VFUNyDhN+8Yeo8Vwx/3dvRlnEl2oro9oXIoc3oD/tKLWPUv3dzOslD1t8cC/pMpitOF0c7XbvhgD6ZVA6pYytNt7tdptv+5lSnbj4vr6Ol1cXDy5vr6u+ur72MD4ZPxNoJumA6vd9uLYd7Ffb957Dt7vPowXpV+OW166MuRPM0F0aNz2/9BvzKa9H68JsnDNBhHQjyF/eijPBxoniIBwgggIJ4iAcIIICCeIgHCCCAgX8aTXSfbrzbDD9DtvHRbkl9Vu+6znb7fFMyI3QrI03d3W8akWg0hRFkvT/V0PTQXRfr1xbxlL1EUv9TGtnRGZlrE05zyAsnmCCOrW/dlQajCITM1YGkFUIR3GLI0gqsl+vXmgmZEF6n7pPrW0oXG8YHe0WhRok1s8gHCCCAgniIBwgggIJ4iAcIIICCeIgHDNFaPd1bgh8uvxz4Nxo9jb1W67iJ2rc9mvN0/HMT28/eb9WF3xegk3bB5jfM7T/ZNex2fmD38ef+GfDM8VvxyfK+5NcYYx1J+P43rs2fQfx3F9Uc3BF2B8bqfrR07v15uvx4A5t0htCKSnzpCOGzuhLk98wD71bjgjWELQG5/b6/aR0+NZ0H9u2eY4vHGuxgDjy+P671t+yNL4c+i+ZdD43F13QbRfb4bfRj/f8X8fbqq9HE+t+eu4PpswroNH+/Wm2ymI8ZmmqyAaf5DfT3yZR+P8nv+P69QP2Y3nPYa88ZmumyAaVyd+yvRygmg0TlVfZnq5++MF3G4Ynzy6CKLxt8hlxpe8PwYbf3zIcvZA9fZBMz4Z9HJG9GKG0rTF19KOU44vbXu4q24eB2V88mk+iPbrzVCo/48ZXtrq2R8Bn11Hj4UyPpn0cEY016nsolfOxg/DbZehF8P45CWIvmzpT5Rd5LWKWzA+GTUdROOKxVy/lT7M9LqtWPw1shOMT0atnxHN+WZYxNMTPmdchZxz2tH0rQzGJ7/Wg2jOJ78uNojmvlDfwf18xiez1oNozjeEm1/n8abHbyqjRY6PYrQve13rgTXOuB63yPERRJ/3brXbLnlqNidBdJwg4k+57h3ir34R8EctdnxaD6I5Olw+rHbbnPettWiu62O91FwYn8xaD6I53hCLru1Mf6za/Da2Bub0qpff9sYnv6aDaLXbvh57f3N542zoTznH4V2HAW98MurhGlGu6zm/d1Zneq0eXGYK+eE1nnXYx2x8MuoliKa+IT6Oxfme4jEax2Lqb+mPYyl8d3uyjE9ezQfR+IaYcgPiB2+Gz1vttkPI/3LH/737cTU++XSxfD9eK/rhDv/rr8PubG+GL1vttkPIv7rl//ZqKeNqfPLoZh/ReJH5mzNXM4Zt9N+udlvTsTOsdtuhw/vbM24/GM4O/j78+yWNq/GZrssHLI6lVU8/cy/azWN+/Sa6o7ER88knNxxfrXbbRT+X64bxub2un/QKtKHbJ70CbRFEQDhBBIQTREA4QQSEE0RAOEEEhBNEQDhBBIQTREA4QQSEE0RAOEEEhBNEQDhBBIQTREA4QQSEE0RAOEEEhBNEQDhBBIQTREA4QQSEE0RAOEEEhBNEQDhBBIQTREA4QQSEE0RAOEEEhBNEQDhBBIQTREA4QQSEE0RAOEEEhBNEQDhBBIQTREA4QQSEE0RAOEEEhBNEQDhBBIQTREA4QQSEE0RAOEEEhBNEQDhBBIQTREA4QQSEu3dzABcXF0/8OIDiUnr7P4TkzSxRGNbaAAAAAElFTkSuQmCC"},50:function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAlCAYAAAAjt+tHAAAACXBIWXMAAAsTAAALEwEAmpwYAAADDUlEQVRYhb2XTWsTURSGn4Y0GcamhlLiR6FkJ1KKSFdVtC7StVDIDyjZuXDhQvwXbqVQBd1IA90IbhJBqBJKSUV3XQix1U0IKTZlvJmMExe5N95Mk8mknfbA5X5N5n3uOWcmc8ba7TYAy8vLUSACxGQfJVxzABewAbdQKDgAY+12W4nHAEO2mASIhCTuSgAbELLZhULBGctkMkrcBCZlb3A+HhCABRzJ3lanNKR4qmhmSyEL91jGyi/KoQs4uuvNopktzaTTGKZJ3DBCFW4KgbAsipVsKWPl55Fh0BPPAM5FHPDeU+VZJEon1qoNFN/f3++Zz87OngWiq6my3DfbhRAkk0ka6ys01ldIJpMIIUYG8FhEkfiaEIJqtcq9G9M8e/sNgPkrUbb2qqRSKYwzhssXQAiBbds8mLvKuyd3evYePi+x+/MPwJkgfAHUyeeuT/Diw/fuerP1l5vXLtFqtdjaq54qHwIBALx/et93P5HbPLU4BHzV2o7bFdLHYVhY7/rzBYhFIzTWV06Mw7CR/3D6ud/7ktJtWIIGBkjkNrsnD+qBILly6hzIre2QW9vpO370qhz4PoEBvKfe2D5gY/ug7/jNpx+BAU790aEDDRoHscAe8MbzwkPgtQsPgde1Fx6C87ITHmg0GgA0m81QBGq1GgDxeNwXwFULiUSC7MI0APV6ncevd3t+sLqUPrE2yFaX0kxNTXXn+XJN33YVgKM1Dg8PefmxEZoHoAp0POA4jlrsakb5Xy4JgEi7TWx8nEQiERJAx5pC4LZaaiqkphvVxK2MlV8sVvoXJjPpNJc1d/rZ73qdX5VK3z1ZmFhodYErJ0fygnl6S7MIQLGS/QwMhVDiGSt/Vy6p/PKWZgJwgxSn3W/4opkt+3lCE1+gN7cGF6dDynPV6+Xbl34Qmvht3cUegP7luZ9JMAOYkM0smtmvOoQmfkuKH8smlNAgGwowAGJCeQLQT37MCOKBAfpATEqIMqBifkwnuQKLjwTggTBli8ktm47rrVHERwbQIFRSqkdVPWL2KOIA/wBrqaBPsq9TWgAAAABJRU5ErkJggg=="},51:function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAlCAYAAAAjt+tHAAAACXBIWXMAAAsTAAALEwEAmpwYAAADV0lEQVRYhb2XTWgTURDHf4m1XRc1tdQVKa0RihdRkSC1VIvIVnoUIehNRFAo9NyLl4oIPYogKnjqRQnUnqSQUKFQ61dQQS9VMFTFRmJNY1k3a9x46Htxk+6mWU0cGN5mNm9//zdv9mMCxWIRgIGBgSYgCDSLsYn6WgGwAQuw4/F4ASBQLBYlvBlQhDcLAcE6wW0hwAJM4VY8Hi8EdF2XcBXYKkaFxmTABAwgJ0ZLrlIRcC2hRufqDC4z3Yj1ikMbKDhTrybU6FxHOIyiqrQoSl3BedPENAwSqeicbsT2IbbBWXgK0BA4UHlNWWdBWe3SGwJ3EVFiyiqvV7X7saBU4styuRzZbPaviJqmrYn5FpDNZhk+0c3V0/t9zRscm2F2/sua+F+l3i8cYGqk3zVeNQOLi4tYluUb5sc8BeTzeSzLYvrScQ7tbi3F2y7cr6sAzy1Ip9NEdrcR2RXi9PU5joxOA/DzV7GuAlwzYBgGAFMjR7n35AMPXn6uK9RprhnIZDKcjHQQDAS4PPEGVVUbJsCzBsaHeriReMfHpR8Ng1cVADCkdzOkdzdUwH97BA+OzbjG130SXpua51LsdVms/eIk+YLtW4SmaaxkMrULOHblIcrGDXy/c4rP335w7vYztm9pYXyopypoy/kJ+va0MzXST3rZ5OzNpzx6+xXF5U1bdQuS77+VHqE7t23i1vkIk8lPVeEAJyMdpXk7Qgp3hw8jP34rzTMDe0efr4mF1I3A6gr9WKva7HnOVUBXV1fpeHBsprSaM9cfEwgE6OzsrApcWFgom+dVgJ4CpGmaxuz8l7IVu73T/2WeFOBa0oqilGWjVqtxng2rRVhwOHnT9A2s1RzXLjGD/GmXTADTMBoiQn6WCzMF025ywA3diPUmUu6NSUc4TKitrSbY8tISn1Ip13OiMTFw9AW2+JETf9hHeWsWBEikorPAuiIkXDdifSIk66uyNTMBu5bmtPQNn1CjyWqZcMAjlNeWd3O6TnsuR2f79sJNhAN+0JniCgHu7Xk1E8IUYLNwNaFGXzlFOOAHBHxFuClBXrauAA8Rm2UmAOfKV/ABr1mAi4itQkQSkHu+wmpx1Qz3JaBChCpcvmUsVlNv+IH7FuAQIYtS3qryFrP8wAF+AzQdg7iYatxtAAAAAElFTkSuQmCC"},57:function(e,t,a){e.exports=a(92)},62:function(e,t,a){},64:function(e,t,a){},92:function(e,t,a){"use strict";a.r(t);var n=a(0),l=a.n(n),r=a(32),c=a.n(r),i=(a(62),a(53)),s=a(8),o=a(5),u=a(28),m=a.n(u),d=a(33),E=a(4),h=a(12),b=a(1),p=a(15),v=(a(64),a(3)),f=a(14),_=a(11),y=a.n(_),g=a(34),N=a.n(g),O=a(50),j=a.n(O),w=a(51),C=a.n(w),x=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=t.width,n=void 0===a?32:a,l=t.height,r=void 0===l?41:l,c=n,i=r;return new _.Icon({iconUrl:e,shadowUrl:"https://chart.apis.google.com/chart?chst=d_map_pin_shadow&chf=a,s,52B55233",iconSize:[c,i],iconAnchor:[c/2,i],popupAnchor:[1,-1.4*i],shadowSize:[i,i]})},A={DefaultIcon:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=t.width,n=void 0===a?25:a,l=t.height,r=void 0===l?41:l,c=t.mult,i=void 0===c?1:c,s=n*i,o=r*i;return new _.Icon({iconUrl:"https://chart.apis.google.com/chart?chst=d_map_pin_icon&chld=home|".concat(e.substring(1),"&chf=a,s,ee00FFFF"),shadowUrl:"https://chart.apis.google.com/chart?chst=d_map_pin_shadow&chf=a,s,52B55233",iconSize:[s,o],iconAnchor:[s/2,o],popupAnchor:[1,-1.4*o],shadowSize:[o,o]})},App:x(N.a),Truck:x(C.a),Headquarters:x(j.a),faComment:f.g,faEnvelope:f.h,faPhone:f.k,faCaretDown:f.b,faCaretUp:f.c,faBars:f.a,faChevronLeft:f.e,faChevronRight:f.f,faEye:f.i,faEyeSlash:f.j,faCheck:f.d,faTimes:f.p,faPlus:f.l,faSort:f.m,faSortUp:f.o,faSortDown:f.n,faTrash:f.q},k=a(23),S=a(108),D=a(110),B=a(106),I=a(109),R=[37.338208,-121.886329];function T(e){var t,a=function(){try{return JSON.parse(window.localStorage.getItem("mapLatlng"))}catch(e){return null}}();try{var n=(t=a,!!Array.isArray(t)&&2===t.length&&!(isNaN(t[0])||t[0]<=-90||t[0]>=90||isNaN(t[1])||t[1]<=-180||t[1]>=180));return[n?a[0]:e[0][1].route_data[0].to[0],n?a[1]:e[0][1].route_data[0].to[1]]}catch(l){return R}}var Q=function(e){var t=e.route,a=e.id,r=Object(o.a)(e,["route","id"]),c=Object(n.useState)([]),i=Object(E.a)(c,2),s=i[0],u=i[1],m=Object(n.useState)(t.route_data[0].from),d=Object(E.a)(m,2),h=d[0],v=(d[1],Object(n.useState)(1)),f=Object(E.a)(v,2),_=f[0];f[1];Object(n.useEffect)((function(){y()}),[]);var y=function(){var e,a=[],n=Object(p.a)(t.route_data);try{for(n.s();!(e=n.n()).done;){var l=e.value;a.push([l.from,l.to,l.address])}}catch(r){n.e(r)}finally{n.f()}!function(e,t){for(var a=0;a<t;a++){var n=function(){return 1*(360*Math.random()-180).toFixed(3)};e.push([[n(),n()],[n(),n()]])}}(a,0),g(a),u(a)},g=function(e){if(e.length){var t=e[_-1][1];e[_-1][1]=h;var a=[h,t];e.splice(_,0,a)}};return l.a.createElement(l.a.Fragment,null,s.map((function(e,n){return l.a.createElement(B.a,{key:n,route:a,position:e[1],icon:_===n+1?A.Truck:A.DefaultIcon(_>n?"#696969":t.route_color,r.selectedLocation.driver-1===r.index&&r.selectedLocation.location===(_>n?n+1:n)?{mult:1.25}:{}),onClick:function(e){return _!==n+1?(a=r.index+1,l=_>n?n+1:n,void r.setSelectedLocation((function(e){var t=Object(b.a)({},e);return a===t.driver&&l===t.location?(t.driver=void 0,t.location=void 0,t):(a!==t.driver&&(t.driver=a),l!==t.location&&(t.location=l),t)}))):function(e,t){console.log("Hi this is Driver ".concat(t,"!"))}(0,t.driver_id);var a,l},onDblClick:function(){return!1}})})),r.header<2&&t.visible&&s.map((function(e,a){return l.a.createElement(I.a,{key:a,positions:[e[0],e[1]],color:_>a?"dimgrey":t.route_color})})),l.a.createElement("button",{onClick:function(){u((function(e){var a=Object(k.a)(e),n=function(e,t){var a=e[0],n=e[1],l=1*(Math.random()*(2*t)+(a-t)).toFixed(3),r=1*(Math.random()*(2*t)+(n-t)).toFixed(3);return[l,r]}(t.route_data[0].to,.1);return a[_-1][1]=n,a[_][0]=n,a}))}},"HI"))};function L(e){var t=e.driver,a=e.id;Object(o.a)(e,["driver","id"]);return l.a.createElement(B.a,{driver:a,position:[t.latitude||Math.random(),t.longitude||Math.random()],icon:A.DefaultIcon("#FFFFFF"),onClick:function(){return console.log("Hi this is Driver ".concat(a))},onDblClick:function(){return!1}})}function M(e){var t=e.business,a=e.id;Object(o.a)(e,["business","id"]);return l.a.createElement(l.a.Fragment,null,l.a.createElement(B.a,{business:a,position:[t.latitude||Math.random(),t.longitude||Math.random()],icon:A.Headquarters,onClick:function(){return console.log("Hi this is Business ".concat(a))},onDblClick:function(){return!1}}),t.customers&&t.customers.map((function(e,t){return l.a.createElement(B.a,{key:t,customer:e.customer_uid,business:a,position:[e.customer_lat||Math.random(),e.customer_long||Math.random()],icon:A.DefaultIcon("#696969"),onClick:function(){return console.log("Hi this is Business ".concat(a,": Customer ").concat(e.customer_uid))},onDblClick:function(){return!1}})})))}function z(e){var t=e.customer,a=e.id;Object(o.a)(e,["customer","id"]);return l.a.createElement(B.a,{customer:a,position:[t.latitude||Math.random(),t.longitude||Math.random()],icon:A.DefaultIcon("#000000"),onClick:function(){return console.log("Hi this is Customer ".concat(a))},onDblClick:function(){return!1}})}var F=function(e){var t=e.header,a=e.routes,r=e.drivers,c=e.businesses,i=e.customers,s=Object(o.a)(e,["header","routes","drivers","businesses","customers"]);console.log("rendering map..");var u=Object(n.useRef)(),m=Object(n.useState)(),d=Object(E.a)(m,2),v=d[0],f=d[1],_=Object(n.useState)({routes:a,drivers:r,businesses:c,customers:i}),g=Object(E.a)(_,2),N=g[0],O=g[1],j=Object(n.useState)([]),w=Object(E.a)(j,2),C=w[0],x=w[1];Object(n.useEffect)((function(){var e=u.current,t=(void 0===e?{}:e).leafletElement;f(t)}),[]),Object(n.useEffect)((function(){v&&setTimeout((function(){return U()}),0)}),[v]),Object(n.useEffect)((function(){v&&A(s.filter?s.filter.type:void 0)}),[t,s.filter]);var A=function(e){var n,l=e;O((function(e){if(l){n=Object(b.a)({},e[l]);for(var o=Object.keys(e[l]),u=Object.entries(e[l]).filter((function(e){return e[1][s.filter.option]!=s.filter.value})),m=Array.from(u,(function(e){return e[0]})),d=0,E=o;d<E.length;d++){var p=E[d];m.includes(p)?n[p].visible=!1:n[p].visible=!0}}else{n=0===t?Object(b.a)({},a):1===t?Object(b.a)({},r):2===t?Object(b.a)({},c):Object(b.a)({},i);for(var v=0,f=Object.keys(n);v<f.length;v++){var _=f[v];n[_].visible=!0}l=0===t?"routes":1===t?"drivers":2===t?"businesses":"customers"}return console.log(n),console.log("YO",Object(b.a)(Object(b.a)({},e),{},Object(h.a)({},l,n))),Object(b.a)(Object(b.a)({},e),{},Object(h.a)({},l,n))}))};Object(n.useEffect)((function(){k("routes")}),[a]),Object(n.useEffect)((function(){k("drivers")}),[r]),Object(n.useEffect)((function(){k("businesses")}),[c]),Object(n.useEffect)((function(){k("customers")}),[i]);var k=function(e){v&&O((function(t){for(var n="routes"===e?a:"drivers"===e?r:"businesses"===e?c:i,l=Object.keys(n),s=Object.keys(t[e]),o=Object(b.a)({},t[e]),u=0,m=l;u<m.length;u++){var d=m[u];s.includes(d)&&(o[d].visible=n[d].visible)}return Object(b.a)(Object(b.a)({},t),{},Object(h.a)({},e,o))}))};Object(n.useEffect)((function(){v&&V()}),[N,t]),Object(n.useEffect)((function(){var e=Object(b.a)({},s.selectedLocation),t=e.driver,a=e.location;if(v&&t&&a){var n=v.getZoom()>=11?v.getZoom():11,l=B[t-1][1].route_data[a-1].to;v.setView(l,n)}}),[s.selectedLocation]);var B=Object.entries(N.routes),I=Object.entries(N.drivers),R=Object.entries(N.businesses),F=Object.entries(N.customers),P=T(B),W=function(){var e=Number(window.localStorage.getItem("mapZoom"));return e&&e>=2&&e<=18?e:11}(),U=function(){var e=v,t=[];e.eachLayer((function(a){a instanceof y.a.Marker&&(t.push(a),q(a)&&e.getBounds().contains(a.getLatLng())||e.removeLayer(a))})),x(t),console.log("loading map..")},V=function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:v,a=Object(p.a)(C);try{for(a.s();!(e=a.n()).done;){var n=e.value,l=q(n),r=t.getBounds(),c=l&&r.contains(n.getLatLng());n._icon&&!c?t.removeLayer(n):!n._icon&&c&&t.addLayer(n)}}catch(i){a.e(i)}finally{a.f()}},q=function(e){switch(t){case 0:return N.routes[e.options.route]?N.routes[e.options.route].visible:!e.options.customer&&(!!N.businesses[e.options.business]&&N.businesses[e.options.business].visible);case 1:return N.routes[e.options.route]?N.routes[e.options.route].visible:!!N.drivers[e.options.driver]&&N.drivers[e.options.driver].visible;case 2:return!!N.businesses[e.options.business]&&N.businesses[e.options.business].visible;case 3:return!e.options.business&&(!!N.customers[e.options.customer]&&N.customers[e.options.customer].visible);default:return!1}};return l.a.createElement(S.a,{ref:u,center:P,zoom:W,minZoom:2,maxBounds:[[-83.75,-180],[83.75,180]],maxBoundsViscosity:.9375,onMoveEnd:function(){V(),window.localStorage.setItem("mapLatlng",JSON.stringify([v.getCenter().lat,v.getCenter().lng])),window.localStorage.getItem("mapZoom")!=v.getZoom()&&window.localStorage.setItem("mapZoom",v.getZoom()),console.log("updating map..")}},l.a.createElement(D.a,{url:"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",attribution:'\xa9 <a href="http://osm.org/copyright">OpenStreetMap</a> contributors',updateWhenZooming:!1}),I.map((function(e,a){return l.a.createElement(L,{key:a,index:a,id:e[0],driver:e[1],header:t})})),R.map((function(e,a){return l.a.createElement(M,{key:a,index:a,id:e[0],business:e[1],header:t})})),F.map((function(e,a){return l.a.createElement(z,{key:a,index:a,id:e[0],customer:e[1],header:t})})),B.map((function(e,a){return l.a.createElement(Q,{key:a,index:a,id:e[0],route:e[1],selectedLocation:s.selectedLocation,setSelectedLocation:s.setSelectedLocation,header:t})})))},P=a(10),W=a.n(P),U="https://uqu7qejuee.execute-api.us-west-1.amazonaws.com/dev/api/v2/",V=function(e,t){var a,n,l,r=t/e,c=~~(6*r),i=6*r-c,s=1-i;switch(c%6){case 0:a=1,n=i,l=0;break;case 1:a=s,n=1,l=0;break;case 2:a=0,n=1,l=i;break;case 3:a=0,n=s,l=1;break;case 4:a=i,n=0,l=1;break;case 5:a=1,n=0,l=s}return"#"+("00"+(~~(255*a)).toString(16)).slice(-2)+("00"+(~~(255*n)).toString(16)).slice(-2)+("00"+(~~(255*l)).toString(16)).slice(-2)},q=function(e){return new Promise((function(t,a){for(var n={},l=Object.keys(e),r=function(){var r=i[c];W.a.get(U+"getBusinessConstraints/"+r).then((function(a){var c=a.data.result.result.length?a.data.result.result[0]:void 0;c&&(n[c.constraint_uid]={business_id:c.business_uid,business_name:e[r].name,business_street:e[r].street,business_unit:e[r].unit,business_city:e[r].city,business_state:e[r].state,business_zip:e[r].zip,business_phone:e[r].phone,num_drivers:c.num_drivers,max_distance:c.max_distance,max_time:c.max_time,min_time:c.min_time,max_deliveries:c.max_deliveries,min_deliveries:c.min_deliveries}),r===l[l.length-1]&&t(n)})).catch((function(e){console.log(e),a(e)}))},c=0,i=l;c<i.length;c++)r()}))},H=function(e){return new Promise((function(t,a){for(var n=Object.keys(e),l=function(){var l=c[r];W.a.get(U+"getCustomersByBusiness/"+l).then((function(a){var r=a.data.result.result;e[l].customers=r,l===n[n.length-1]&&t("success")})).catch((function(e){console.log(e),a(e)}))},r=0,c=n;r<c.length;r++)l()}))},X=function(e,t){if(t["".concat(e,"_uid")]){if(!Object.values(t.new_data).length)return!1}else{var a=Object.entries(t);if(!a.length)return!1;for(var n=0,l=a;n<l.length;n++){if(""===l[n][1])return!1}}return!0};function Z(e){var t=e.route,a=e.id,r=Object(o.a)(e,["route","id"]),c=Object(n.useState)(!0),i=Object(E.a)(c,2),s=i[0],u=i[1],m=Object(n.useState)((function(){var e=r.driversList.find((function(e){return e[0]===t.driver_id}));if(e)return e;var n=Object.keys(r.driversToRoutes).find((function(e){return e===a}));return n?[r.driversToRoutes[n].id,r.driversToRoutes[n].name]:void 0})),d=Object(E.a)(m,2),h=d[0],p=d[1],f=Object.values(t.route_data),_=Number(a.substring(a.indexOf("-")+1,a.length));Object(n.useEffect)((function(){r.selectedLocation.driver===r.index+1&&s&&u(!1)}),[r.selectedLocation]);return l.a.createElement("div",{className:"box list-item"},l.a.createElement("table",{className:"table is-hoverable is-fullwidth is-size-7",style:{backgroundColor:"#f8f7fa"}},l.a.createElement("thead",null,l.a.createElement("tr",{className:"list-item-head"},l.a.createElement("th",{style:{width:"17.5%"}},l.a.createElement("div",{style:{width:"200%",maxWidth:"225px"}},l.a.createElement("button",{className:"button is-super-small is-rounded mr-3",onClick:function(){r.setSelectedLocation({driver:void 0,location:void 0}),r.dispatch({type:"toggle-visibility",payload:{id:a,type:"routes"}})}},l.a.createElement(v.a,{icon:t.visible?A.faEyeSlash:A.faEye})),l.a.createElement("div",{className:"route",style:Object(b.a)({backgroundColor:"".concat(t.visible?t.route_color:"lightgrey"),borderBottom:"3px solid ".concat(t.visible?t.route_color:"lightgrey")},t.visible?{}:{marginLeft:"1.32px"})},l.a.createElement("span",null,"Route ",_)))),l.a.createElement("th",{style:{width:"29%"}}),l.a.createElement("th",{style:{width:"11%"}},l.a.createElement("div",{style:{width:"300%",maxWidth:"225px"}},l.a.createElement(J,{route_id:a,driver_num:t.driver_num,driver:h,setDriver:p,list:r.driversList,setList:r.setDriversList,setDriversToRoutes:r.setDriversToRoutes}),l.a.createElement("button",{className:"button is-rounded is-super-small is-pulled-right ml-1",onClick:function(){return console.log("Not sure what this does atm")}},l.a.createElement(v.a,{icon:A.faPhone})),l.a.createElement("button",{className:"button is-rounded is-super-small is-pulled-right",onClick:function(){return e=t.driver_id,void console.log("Sending Driver ".concat(e," a text.."));var e}},l.a.createElement(v.a,{icon:A.faComment})))),l.a.createElement("th",{style:{width:"12.5%"}}),l.a.createElement("th",{style:{width:"12.5%"}}),l.a.createElement("th",{style:{width:"17.5%"}},l.a.createElement("button",{className:"button is-super-small is-pulled-right",onClick:function(){return u((function(e){return!e}))}},l.a.createElement(v.a,{icon:s?A.faCaretDown:A.faCaretUp}))))),l.a.createElement("tbody",{hidden:s},l.a.createElement("tr",null,l.a.createElement("th",{style:{borderBottomWidth:"2px"}}),l.a.createElement("th",{style:{borderBottomWidth:"2px"}},"Destination"),l.a.createElement("th",{style:{borderBottomWidth:"2px"}},"Customer"),l.a.createElement("th",{style:{borderBottomWidth:"2px"}},"ETA"),l.a.createElement("th",{style:{borderBottomWidth:"2px"}},"Arrival"),l.a.createElement("th",{style:{borderBottomWidth:"2px"}},l.a.createElement("span",{className:"ml-2"},"Confirm"))),f.map((function(e,a){return l.a.createElement("tr",{key:a,className:r.selectedLocation.driver===r.index+1&&r.selectedLocation.location===a+1?"is-selected":""},l.a.createElement("td",null,l.a.createElement("button",{className:"button is-rounded is-small mx-1",disabled:!t.visible,onClick:function(){return e=r.index+1,t=a+1,void r.setSelectedLocation((function(a){var n=Object(b.a)({},a);return e===n.driver&&t===n.location?(n.driver=void 0,n.location=void 0,n):(e!==n.driver&&(n.driver=e),t!==n.location&&(n.location=t),n)}));var e,t},style:{padding:"0.69rem"}},a+1),l.a.createElement("button",{className:"button is-rounded is-small mx-1",onClick:function(){return e=a+1,void console.log("Skipping Location ".concat(e,".."));var e}},"Skip")),l.a.createElement("td",null,e.address),l.a.createElement("td",null,"".concat(e.customer_first_name," ").concat(e.customer_last_name[0],".")),l.a.createElement("td",null,"N/A"),l.a.createElement("td",null,"N/A"),l.a.createElement("td",null,l.a.createElement("button",{className:"button is-rounded is-small mx-1",onClick:function(){return e=a+1,void console.log("Sending Location ".concat(e," a text.."));var e}},l.a.createElement(v.a,{icon:A.faComment})),l.a.createElement("button",{className:"button is-rounded is-small mx-1",onClick:function(){return e=a+1,void console.log("Sending Location ".concat(e," an email.."));var e}},l.a.createElement(v.a,{icon:A.faEnvelope}))))})))))}function J(e){var t=e.driver,a=e.setDriver,r=e.list,c=e.setList,i=Object(o.a)(e,["driver","setDriver","list","setList"]),s=Object(n.useState)(!1),u=Object(E.a)(s,2),m=u[0],d=u[1],p=t?Number(t[0].substring(t[0].indexOf("-")+1,t[0].length)):void 0;Object(n.useEffect)((function(){t&&(c((function(e){return Object(k.a)(e).filter((function(e){return e[0]!==t[0]}))})),i.setDriversToRoutes((function(e){return Object(b.a)(Object(b.a)({},e),{},Object(h.a)({},i.route_id,{id:t[0],name:t[1]}))})))}),[]);var f=function(e,n){c((function(a){var n=Object(k.a)(a).filter((function(t){return t[0]!==e}));return t&&n.push(t),n})),i.setDriversToRoutes((function(t){var a=Object(b.a)({},t);return e?a[i.route_id]={id:e,name:n}:delete a[i.route_id],a})),a(e?r.find((function(t){return t[0]===e})):void 0),d(!1)};return l.a.createElement(l.a.Fragment,null,l.a.createElement("span",{className:"mr-1"},"Driver ".concat(i.driver_num,":")),l.a.createElement("div",{className:"dropdown"+(m?" is-active":"")},l.a.createElement("div",{className:"dropdown-trigger"},l.a.createElement("button",Object.assign({className:"button is-super-small",style:Object(b.a)({width:"100px"},!t&&{borderColor:"red",color:"red"}),onClick:function(){return d((function(e){return!e}))},"aria-haspopup":"true","aria-controls":"dropdown-menu"},t&&{title:"Driver ID: ".concat(p)}),t?t[1]:"Choose Driver",l.a.createElement(v.a,{icon:A.faCaretDown,className:"ml-2"}))),l.a.createElement("div",{className:"dropdown-menu",style:{paddingTop:0},id:"dropdown-menu",role:"menu"},l.a.createElement("div",{className:"dropdown-content"},l.a.createElement("button",{className:"button is-small is-white dropdown-item",disabled:!t,onClick:function(){return f()}},"Deselect"),l.a.createElement("hr",{className:"dropdown-divider"}),r.map((function(e,t){return l.a.createElement("button",{key:t,className:"button is-small is-white dropdown-item",onClick:function(){return f(e[0],e[1])},title:"Driver ID: ".concat(Number(e[0].substring(e[0].indexOf("-")+1,e[0].length)))},e[1])}))))))}var K=function(e){var t=e.routes,a=e.drivers,r=Object(o.a)(e,["routes","drivers"]);console.log("rendering deliveries..");var c=Object(n.useState)(Object.entries(t)),i=Object(E.a)(c,2),s=i[0],u=i[1],h=Object(n.useState)(Array.from(Object.entries(a),(function(e){return[e[0],"".concat(e[1].first_name," ").concat(e[1].last_name)]}))),b=Object(E.a)(h,2),f=b[0],_=b[1],y=Object(n.useState)({}),g=Object(E.a)(y,2),N=g[0],O=g[1];console.log(N),Object(n.useEffect)((function(){var e=Object.entries(t);r.filter?u((function(){return e.filter((function(e){return e[1][r.filter.option]==r.filter.value}))})):u(e)}),[t,r.filter]);var j=function(){var e=Object(d.a)(m.a.mark((function e(){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("SAVING DRIVERS TO THEIR ROUTES"),e.next=3,function(){var e=Object.entries(N);return new Promise((function(a,n){var l,r=Object(p.a)(e);try{var c=function(){var r=l.value;t[r[0]].driver_id!==r[1].id&&W.a.get(U+"updateDriverID/".concat(r[1].id,"/").concat(r[0])).then((function(t){console.log(t),r[1]===N[e.length-1]&&a("success")})).catch((function(e){console.log(e),n(e)}))};for(r.s();!(l=r.n()).done;)c()}catch(i){r.e(i)}finally{r.f()}}))}();case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return l.a.createElement(l.a.Fragment,null,l.a.createElement("button",{className:"button is-small mx-1 is-success is-outlined is-rounded",style:{marginBottom:"1rem"},onClick:j},l.a.createElement(v.a,{icon:A.faCheck,className:"mr-2"}),"Save Changes"),s.map((function(e,t){return l.a.createElement(Z,{key:t,index:t,route:e[1],id:e[0],selectedLocation:r.selectedLocation,setSelectedLocation:r.setSelectedLocation,drivers:a,driversList:f,setDriversList:_,driversToRoutes:N,setDriversToRoutes:O,dispatch:r.dispatch})})))};var G=function(e){var t=e.numColumns,a=e.showMore,n=e.setShowMore;return l.a.createElement("tr",{className:"filler-row"},Object(k.a)(Array(t-1)).map((function(e,t){return l.a.createElement("td",{key:t})})),l.a.createElement("td",{style:{textAlign:"right"}},n?l.a.createElement(l.a.Fragment,null,l.a.createElement("span",{className:"has-text-grey mb-1"},"Show ",a?"Less":"More"),l.a.createElement("button",{className:"button is-super-small is-light mx-1",onClick:function(){return n((function(e){return!e}))}},l.a.createElement(v.a,{icon:a?A.faCaretUp:A.faCaretDown,color:"grey"}))):l.a.createElement("div",{style:{marginBottom:"20px"}})))};var Y=function(e){var t=e.className,a=e.style,n=e.value,r=e.placeholder,c=e.handleChange,i=e.type,s=Object(o.a)(e,["className","style","value","placeholder","handleChange","type"]),u=function(e,t){e.target.style.height=t?"".concat(e.target.scrollHeight+(58!==e.target.scrollHeight?8:0),"px"):"5em"};return s.textarea?l.a.createElement("textarea",{className:"textarea is-small"+(t?" "+t:""),style:Object(b.a)({minHeight:"5em"},a),value:n,placeholder:r,onFocus:function(e){return u(e,!0)},onBlur:function(e){return u(e,!1)},onChange:function(e){return c(e,i)}}):l.a.createElement("input",Object.assign({className:(s.checkbox?"":"input is-super-small")+(t?" "+t:""),style:s.checkbox?Object(b.a)({verticalAlign:"middle"},a):a},s.checkbox?{type:"checkbox",checked:n}:{value:n},{placeholder:r,onChange:function(e){return c(e,i)}}))},$=a(24),ee=a.n($),te=ee.a.weekdays(),ae=function(e){var t=Number(e.substring(0,2));if(Math.floor(t/12)){var a=t%12;return(Math.floor(a/10)?"":"0")+a+e.substring(2,e.length-3)+"pm"}return e.substring(0,e.length-3)+"am"};function ne(e){var t=e.days,a=e.selectedDay,n=(Object(o.a)(e,["days","selectedDay"]),ae(t[a][0])),r=ae(t[a][1]);return l.a.createElement("p",null,n," - ",r)}var le=function(e){var t=e.type,a=(Object(o.a)(e,["type"]),Object(n.useState)(!1)),r=Object(E.a)(a,2),c=r[0],i=r[1],s=Object(n.useState)(t?JSON.parse(t):[]),u=Object(E.a)(s,2),m=u[0],d=(u[1],Object(n.useState)(te[0])),h=Object(E.a)(d,2),b=h[0],p=h[1];return l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{className:"dropdown has-text-left mr-1"+(c?" is-active":"")},l.a.createElement("div",{className:"dropdown-trigger"},l.a.createElement("button",{className:"button is-super-small",onClick:function(){return i((function(e){return!e}))},"aria-haspopup":"true","aria-controls":"dropdown-menu"},l.a.createElement("span",null,b),l.a.createElement(v.a,{icon:A.faCaretDown,className:"ml-1"}))),l.a.createElement("div",{className:"dropdown-menu",style:{paddingTop:0,minWidth:"8rem"},id:"dropdown-menu",role:"menu"},l.a.createElement("div",{className:"dropdown-content"},te.map((function(e,t){return l.a.createElement("button",{key:t,className:"button is-small is-white dropdown-item",disabled:e===b,onClick:function(){p(e),i(!1)}},e)}))))),m[b]&&l.a.createElement(ne,{days:m,selectedDay:b}))},re=a(107),ce={available_hours:"",bank_account_info:"",bank_routing_info:"",business_id:"",city:"",delivery_fee:"",drivers_license:"",drivers_license_exp:"",email:"",emergency_contact_name:"",emergency_contact_phone:"",emergency_contact_relationship:"",first_name:"",hourly_rate:"",insurance_carrier:"",insurance_expiration:"",insurance_number:"",last_name:"",latitude:0,longitude:0,password:"",phone:"",phone2:"",preferred_routes:"",rating:"",scheduled_hours:"",ssn:"",state:"",street:"",unit:"",vehicle_types:"",weekly_workload:"",zip:""};function ie(e){var t=e.driver,a=e.id,r=Object(o.a)(e,["driver","id"]),c=Object(n.useState)(!0),i=Object(E.a)(c,2),s=i[0],u=i[1],m=Object(n.useState)(!1),d=Object(E.a)(m,2),h=d[0],b=d[1],p="".concat(t.street).concat(t.unit?" ".concat(t.unit):""," \n                   ").concat(t.city," ").concat(t.state," ").concat(t.zip),f=Number(a.substring(a.indexOf("-")+1,a.length));return l.a.createElement("div",{className:"box list-item"},l.a.createElement("table",{className:"table is-hoverable is-fullwidth is-size-7",style:{backgroundColor:"#f8f7fa"}},l.a.createElement("thead",null,l.a.createElement("tr",{className:"list-item-head"},l.a.createElement("th",{style:{width:"40%"}},l.a.createElement("div",{style:{width:"240px"}},l.a.createElement("span",null,"Driver ",f,": ","".concat(t.first_name," ").concat(t.last_name?t.last_name[0]:"",".")),l.a.createElement("button",{className:"button is-rounded is-pulled-right is-super-small ml-1"},l.a.createElement(v.a,{icon:A.faEnvelope})),l.a.createElement("button",{className:"button is-rounded is-pulled-right is-super-small"},l.a.createElement(v.a,{icon:A.faComment})))),l.a.createElement("th",{style:{width:"20%"}}),l.a.createElement("th",{style:{width:"20%"}},l.a.createElement("div",{style:{width:"150%",maxWidth:"225px"}},l.a.createElement(re.a,{value:t.rating,size:"small",precision:.2,readOnly:!0}),l.a.createElement("span",{className:"ml-4"},"Rating"))),l.a.createElement("th",{style:{width:"20%"}},l.a.createElement("button",{className:"button is-super-small is-pulled-right",onClick:function(){return u((function(e){return!e}))}},l.a.createElement(v.a,{icon:s?A.faCaretDown:A.faCaretUp})),!s&&l.a.createElement("button",{className:"button is-super-small is-pulled-right mr-1",onClick:function(){return r.handleEdit("edit",a)}},l.a.createElement(v.a,{icon:A.faPlus}))))),l.a.createElement("tbody",{className:"is-bordered has-text-centered",hidden:s},l.a.createElement("tr",null,l.a.createElement("td",null,l.a.createElement("div",{className:"level"},l.a.createElement("div",{className:"level-item"},l.a.createElement("span",{style:{width:"100%",textAlign:"left"}},"First & Middle Name:",l.a.createElement("hr",{style:{margin:0,backgroundColor:"#ededed"}}),"Last Name:")),l.a.createElement("div",{className:"level-item"},l.a.createElement("span",{style:{width:"100%",textAlign:"left"}},t.first_name,l.a.createElement("hr",{style:{margin:0,backgroundColor:"#ededed"}}),t.last_name)))),l.a.createElement("td",null,"# of hours/week",l.a.createElement("br",null),t.weekly_workload),l.a.createElement("td",null,l.a.createElement("div",{style:{width:"215%"}},l.a.createElement("div",{className:"level"},l.a.createElement("div",{className:"level-item",style:{flexShrink:1}},"Driver's License #",l.a.createElement("br",null),t.drivers_license),l.a.createElement("div",{className:"level-item",style:{flexShrink:1}},"License Expiration",l.a.createElement("br",null),t.drivers_license_exp),l.a.createElement("div",{className:"level-item",style:{flexShrink:1}},"Vehicle Types",l.a.createElement("br",null),t.vehicle_types)))),l.a.createElement("td",{style:{borderLeft:"hidden"}})),l.a.createElement("tr",null,l.a.createElement("td",null,l.a.createElement("div",{className:"level"},l.a.createElement("div",{className:"level-item"},l.a.createElement("span",{style:{width:"100%"}},"Emergency Contact:",l.a.createElement("br",null),t.emergency_contact_phone)),l.a.createElement("div",{className:"level-item"},l.a.createElement("span",{style:{width:"100%",textAlign:"left"}},t.emergency_contact_name,l.a.createElement("br",null),t.emergency_contact_relationship)))),l.a.createElement("td",null,"Preferred Routes",l.a.createElement("br",null),t.preferred_routes),l.a.createElement("td",null,"Available Times",l.a.createElement("br",null),l.a.createElement(le,{type:t.available_hours})),l.a.createElement("td",null,"Scheduled Times",l.a.createElement("br",null),l.a.createElement(le,{type:t.scheduled_hours}))),l.a.createElement(G,{numColumns:4,showMore:h,setShowMore:b}),h&&l.a.createElement(l.a.Fragment,null,l.a.createElement("tr",null,l.a.createElement("td",{style:{textAlign:"left"}},"Address:",l.a.createElement("br",null),p),l.a.createElement("td",null,"Insurance Carrier",l.a.createElement("br",null),t.insurance_carrier),l.a.createElement("td",null,"Insurance Number",l.a.createElement("br",null),t.insurance_number),l.a.createElement("td",null,"Insurance Expiration",l.a.createElement("br",null),t.insurance_expiration)),l.a.createElement("tr",null,l.a.createElement("td",null,l.a.createElement("div",{className:"level"},l.a.createElement("div",{className:"level-item"},"Phone #1",l.a.createElement("br",null),t.phone),l.a.createElement("div",{className:"level-item"},"Phone #2",l.a.createElement("br",null),t.phone2))),l.a.createElement("td",null,"Email",l.a.createElement("br",null),t.email),l.a.createElement("td",null,"Account Password",l.a.createElement("br",null),t.password),l.a.createElement("td",null,"Business ID",l.a.createElement("br",null)," ",t.business_id)),l.a.createElement("tr",null,l.a.createElement("td",null,l.a.createElement("div",{className:"level"},l.a.createElement("div",{className:"level-item"},l.a.createElement("span",null,"Bank Account #",l.a.createElement("br",null),t.bank_account_info)),l.a.createElement("div",{className:"level-item"},l.a.createElement("span",null,"Bank Routing #",l.a.createElement("br",null),t.bank_routing_info)))),l.a.createElement("td",null,"SSN",l.a.createElement("br",null),t.ssn),l.a.createElement("td",null,"Hourly Rate",l.a.createElement("br",null),t.hourly_rate),l.a.createElement("td",null,"Delivery Fee",l.a.createElement("br",null),t.delivery_fee))))))}function se(e){var t=e.driver,a=e.id,r=Object(o.a)(e,["driver","id"]),c=Object(n.useState)(t),i=Object(E.a)(c,2),s=i[0],u=i[1],m=t!==ce,d=Number(a.substring(a.indexOf("-")+1,a.length)),p=function(e,t){e.persist(),u((function(a){return Object(b.a)(Object(b.a)({},a),{},Object(h.a)({},t,e.target.value))}))};return l.a.createElement(l.a.Fragment,null,!m&&l.a.createElement(l.a.Fragment,null,l.a.createElement("button",{className:"button is-small mx-1 is-danger is-outlined is-rounded",style:{marginBottom:"1rem"},onClick:function(){return r.handleEdit("cancel")}},l.a.createElement(v.a,{icon:A.faTimes,className:"mr-2"}),"Cancel"),l.a.createElement("button",{className:"button is-small mx-1 is-success is-outlined is-rounded",onClick:function(){return r.handleEdit("save",void 0,s,t)}},l.a.createElement(v.a,{icon:A.faCheck,className:"mr-2"}),"Save")),l.a.createElement("div",{className:"box list-item"},l.a.createElement("table",{className:"table is-hoverable is-fullwidth is-size-7",style:{backgroundColor:"#f8f7fa"}},l.a.createElement("thead",null,l.a.createElement("tr",{className:"list-item-head"},l.a.createElement("th",{style:{width:"40%"}},l.a.createElement("div",{style:{width:"240px"}},l.a.createElement("span",null,m?"Driver ".concat(d,": ","".concat(t.first_name," ").concat(t.last_name[0],".")):"New Driver: "))),l.a.createElement("th",{style:{width:"20%"}}),l.a.createElement("th",{style:{width:"20%"}}),l.a.createElement("th",{style:{width:"20%"}},m&&l.a.createElement(l.a.Fragment,null,l.a.createElement("button",{className:"button is-super-small is-pulled-right",onClick:function(){return r.handleEdit("save",a,s,t)}},l.a.createElement(v.a,{icon:A.faCheck})),l.a.createElement("button",{className:"button is-super-small is-pulled-right mr-1",onClick:function(){return r.handleEdit("cancel")}},l.a.createElement(v.a,{icon:A.faTimes})))))),l.a.createElement("tbody",{className:"is-bordered has-text-centered"},l.a.createElement("tr",null,l.a.createElement("td",null,l.a.createElement("div",{className:"level"},l.a.createElement("div",{className:"level-item"},l.a.createElement("span",{style:{width:"100%",textAlign:"left"}},"First & Middle Name:",l.a.createElement("hr",{style:{margin:0,backgroundColor:"#ededed"}}),"Last Name:")),l.a.createElement("div",{className:"level-item"},l.a.createElement("div",{style:{width:"100%",textAlign:"left"}},l.a.createElement(Y,{type:"first_name",value:s.first_name,handleChange:p}),l.a.createElement("hr",{style:{margin:0,backgroundColor:"#ededed"}}),l.a.createElement(Y,{type:"last_name",value:s.last_name,handleChange:p}))))),l.a.createElement("td",null,"# of hours/week",l.a.createElement("br",null),l.a.createElement(Y,{type:"weekly_workload",value:s.weekly_workload,handleChange:p})),l.a.createElement("td",null,l.a.createElement("div",{style:{width:"215%"}},l.a.createElement("div",{className:"level",style:{marginBottom:0}},l.a.createElement("div",{className:"level-item"},"Driver's License #"),l.a.createElement("div",{className:"level-item"},"License Expiration"),l.a.createElement("div",{className:"level-item"},"Vehicle Types")),l.a.createElement("div",{className:"level"},l.a.createElement(Y,{type:"drivers_license",value:s.drivers_license,className:"level-item",style:{width:"33%"},handleChange:p}),l.a.createElement(Y,{type:"drivers_license_exp",value:s.drivers_license_exp,className:"level-item mx-1",style:{width:"33%"},handleChange:p}),l.a.createElement(Y,{type:"vehicle_types",value:s.vehicle_types,className:"level-item",style:{width:"33%"},handleChange:p})))),l.a.createElement("td",{style:{borderLeft:"hidden"}})),l.a.createElement("tr",null,l.a.createElement("td",null,l.a.createElement("div",{className:"level"},l.a.createElement("div",{className:"level-item",style:{flexShrink:1}},l.a.createElement("span",{className:"mr-1",style:{width:"100%"}},"Emergency Contact:",l.a.createElement("br",null),l.a.createElement(Y,{style:{marginTop:"0.35rem"},type:"emergency_contact_phone",value:s.emergency_contact_phone,placeholder:"Phone",handleChange:p}))),l.a.createElement("div",{className:"level-item",style:{flexShrink:1}},l.a.createElement("span",{style:{width:"100%",textAlign:"left"}},l.a.createElement(Y,{className:"mb-1",type:"emergency_contact_name",value:s.emergency_contact_name,placeholder:"Name",handleChange:p}),l.a.createElement("br",null),l.a.createElement(Y,{type:"emergency_contact_relationship",value:s.emergency_contact_relationship,placeholder:"Relationship",handleChange:p}))))),l.a.createElement("td",null,"Preferred Routes",l.a.createElement("br",null),l.a.createElement(Y,{type:"preferred_routes",value:s.preferred_routes,handleChange:p})),l.a.createElement("td",null,"Available Times",l.a.createElement("br",null),l.a.createElement(Y,{type:"available_hours",value:s.available_hours,handleChange:p})),l.a.createElement("td",null,"Scheduled Times",l.a.createElement("br",null),l.a.createElement(Y,{type:"scheduled_hours",value:s.scheduled_hours,handleChange:p}))),l.a.createElement(G,{numColumns:4}),l.a.createElement("tr",null,l.a.createElement("td",{style:{textAlign:"left"}},"Address:",l.a.createElement("br",null),l.a.createElement("div",{style:{display:"flex",flexWrap:"wrap"}},l.a.createElement(Y,{className:"mr-1 mb-1",style:{width:"65%"},type:"street",value:s.street,placeholder:"Street",handleChange:p}),l.a.createElement(Y,{className:"mr-1 mb-1",style:{width:"30%"},type:"unit",value:s.unit,placeholder:"Unit (optional)",handleChange:p}),l.a.createElement(Y,{className:"mr-1 mb-1",style:{width:"44%"},type:"city",value:s.city,placeholder:"City",handleChange:p}),l.a.createElement(Y,{className:"mr-1 mb-1",style:{width:"20%"},type:"state",value:s.state,placeholder:"State",handleChange:p}),l.a.createElement(Y,{style:{width:"30%"},type:"zip",value:s.zip,placeholder:"ZIP Code",handleChange:p}))),l.a.createElement("td",null,"Insurance Carrier",l.a.createElement("br",null),l.a.createElement(Y,{type:"insurance_carrier",value:s.insurance_carrier,handleChange:p})),l.a.createElement("td",null,"Insurance Number",l.a.createElement("br",null),l.a.createElement(Y,{type:"insurance_number",value:s.insurance_number,handleChange:p})),l.a.createElement("td",null,"Insurance Expiration",l.a.createElement("br",null),l.a.createElement(Y,{type:"insurance_expiration",value:s.insurance_expiration,handleChange:p}))),l.a.createElement("tr",null,l.a.createElement("td",null,l.a.createElement("div",{className:"level"},l.a.createElement("div",{className:"level-item",style:{flexShrink:1}},l.a.createElement("span",{className:"mr-1"},"Phone #1",l.a.createElement("br",null),l.a.createElement(Y,{type:"phone",value:s.phone,handleChange:p}))),l.a.createElement("div",{className:"level-item",style:{flexShrink:1}},l.a.createElement("span",null,"Phone #2",l.a.createElement("br",null),l.a.createElement(Y,{type:"phone2",value:s.phone2,handleChange:p}))))),l.a.createElement("td",null,"Email",l.a.createElement("br",null),l.a.createElement(Y,{type:"email",value:s.email,handleChange:p})),l.a.createElement("td",null,"Account Password",l.a.createElement("br",null),l.a.createElement(Y,{type:"password",value:s.password,handleChange:p})),l.a.createElement("td",null,"Business ID",l.a.createElement("br",null),l.a.createElement(Y,{type:"business_id",value:s.business_id,handleChange:p}))),l.a.createElement("tr",null,l.a.createElement("td",null,l.a.createElement("div",{className:"level"},l.a.createElement("div",{className:"level-item",style:{flexShrink:1}},l.a.createElement("span",{className:"mr-1"},"Bank Account #",l.a.createElement("br",null),l.a.createElement(Y,{type:"bank_account_info",value:s.bank_account_info,handleChange:p}))),l.a.createElement("div",{className:"level-item",style:{flexShrink:1}},l.a.createElement("span",null,"Bank Routing #",l.a.createElement("br",null),l.a.createElement(Y,{type:"bank_routing_info",value:s.bank_routing_info,handleChange:p}))))),l.a.createElement("td",null,"SSN",l.a.createElement("br",null),l.a.createElement(Y,{type:"ssn",value:s.ssn,handleChange:p})),l.a.createElement("td",null,"Hourly Rate",l.a.createElement("br",null),l.a.createElement(Y,{type:"hourly_rate",value:s.hourly_rate,handleChange:p})),l.a.createElement("td",null,"Delivery Fee",l.a.createElement("br",null),l.a.createElement(Y,{type:"delivery_fee",value:s.delivery_fee,handleChange:p})))))))}var oe=function(e){var t=e.drivers,a=e.routes,r=Object(o.a)(e,["drivers","routes"]);console.log("rendering drivers..");var c=Object(n.useState)(Object.entries(t)),i=Object(E.a)(c,2),s=i[0],u=i[1],m=Object(n.useState)(),d=Object(E.a)(m,2),h=d[0],p=d[1];Object(n.useEffect)((function(){var e=Object.entries(t);r.filter?u((function(){return e.filter((function(e){return e[1][r.filter.option]==r.filter.value}))})):u(e)}),[t,r.filter]);var f=function(e,t,a,n){if("edit"===e)p(t);else if("add"===e)p("add");else{if("save"===e){console.log("SAVED:",a);var l=Object(b.a)(Object(b.a)(Object(b.a)(Object(b.a)(Object(b.a)(Object(b.a)(Object(b.a)(Object(b.a)(Object(b.a)(Object(b.a)(Object(b.a)(Object(b.a)(Object(b.a)(Object(b.a)(Object(b.a)(Object(b.a)(Object(b.a)(Object(b.a)(Object(b.a)(Object(b.a)(Object(b.a)(Object(b.a)({},(!t||a.first_name!==n.first_name)&&{driver_first_name:a.first_name}),(!t||a.last_name!==n.last_name)&&{driver_last_name:a.last_name}),(!t||a.business_id!==n.business_id)&&{business_id:a.business_id}),(!t||a.available_hours!==n.available_hours)&&{driver_available_hours:a.available_hours}),(!t||a.scheduled_hours!==n.scheduled_hours)&&{driver_scheduled_hours:a.scheduled_hours}),(!t||a.street!==n.street)&&{driver_street:a.street}),(!t||a.city!==n.city)&&{driver_city:a.city}),(!t||a.state!==n.state)&&{driver_state:a.state}),(!t||a.zip!==n.zip)&&{driver_zip:a.zip}),(!t||a.phone!==n.phone)&&{driver_phone_num:a.phone}),(!t||a.email!==n.email)&&{driver_email:a.email}),(!t||a.phone2!==n.phone2)&&{driver_phone_num2:a.phone2}),(!t||a.ssn!==n.ssn)&&{driver_ssn:a.ssn}),(!t||a.drivers_license!==n.drivers_license)&&{driver_license:a.drivers_license}),(!t||a.drivers_license_exp!==n.drivers_license_exp)&&{driver_license_exp:a.drivers_license_exp}),(!t||a.insurance_number!==n.insurance_number)&&{driver_insurance_num:a.insurance_number}),(!t||a.password!==n.password)&&{driver_password:a.password}),(!t||a.emergency_contact_name!==n.emergency_contact_name)&&{emergency_contact_name:a.emergency_contact_name}),(!t||a.emergency_contact_phone!==n.emergency_contact_phone)&&{emergency_contact_phone:a.emergency_contact_phone}),(!t||a.emergency_contact_relationship!==n.emergency_contact_relationship)&&{emergency_contact_relationship:a.emergency_contact_relationship}),(!t||a.bank_routing_info!==n.bank_routing_info)&&{bank_routing_info:a.bank_routing_info}),(!t||a.bank_account_info!==n.bank_account_info)&&{bank_account_info:a.bank_account_info});console.log(l);var r=U+(t?"Drivers":"insertNewDriver"),c=t?{driver_uid:t,new_data:l}:l;console.log(r,c),console.log(X("driver",c)),X("driver",c)&&W.a.post(r,c).then((function(e){console.log(e)})).catch((function(e){console.log(e)}))}p()}};return l.a.createElement(l.a.Fragment,null,"add"!==h&&l.a.createElement("button",{className:"button is-small mx-1 is-success is-outlined is-rounded",style:{marginBottom:"1rem"},onClick:function(){return f("add")}},l.a.createElement(v.a,{icon:A.faPlus,className:"mr-2"}),"Add Driver"),"add"===h&&l.a.createElement(se,{driver:ce,id:h,handleEdit:f}),s.map((function(e,t){return l.a.createElement(l.a.Fragment,{key:t},h!==e[0]?l.a.createElement(ie,{key:t,index:t,driver:e[1],id:e[0],routes:a,handleEdit:f,dispatch:r.dispatch}):l.a.createElement(se,{driver:e[1],id:e[0],handleEdit:f,dispatch:r.dispatch}))})))},ue={EIN:"",USDOT:"",WAUBI:"",accepting_hours:"",available_zones:"",can_cancel:0,city:"",contact_first_name:"",contact_last_name:"",delivery:0,delivery_hours:"",description:"",email:"",hours:"",image:"",latitude:0,license:"",longitude:0,name:"",notification_approval:"",notification_device_id:"",password:"",phone:"",phone2:"",registered:"",reusable:0,state:"",street:"",type:"",unit:"",visible:!0,zip:"",zones:""};function me(e){var t=e.business,a=e.id,r=Object(o.a)(e,["business","id"]),c=Object(n.useState)(!0),i=Object(E.a)(c,2),s=i[0],u=i[1],m=Object(n.useState)(!1),d=Object(E.a)(m,2),h=d[0],p=d[1],f="".concat(t.street).concat(t.unit?" ".concat(t.unit):""," \n                   ").concat(t.city," ").concat(t.state," ").concat(t.zip),_=Number(a.substring(a.indexOf("-")+1,a.length));return l.a.createElement("div",{className:"box list-item"},l.a.createElement("table",{className:"table is-hoverable is-fullwidth is-size-7",style:{backgroundColor:"#f8f7fa"}},l.a.createElement("thead",null,l.a.createElement("tr",{className:"list-item-head"},l.a.createElement("th",{style:{width:"20%"}},l.a.createElement("div",{style:{width:"300%",maxWidth:"325px"}},l.a.createElement("button",{className:"button is-super-small is-rounded mr-3",onClick:function(){r.dispatch({type:"toggle-visibility",payload:{id:a,type:"businesses"}})}},l.a.createElement(v.a,{icon:t.visible?A.faEyeSlash:A.faEye})),l.a.createElement("span",{style:Object(b.a)({},t.visible?{}:{marginLeft:"1.32px"})},"Business ",_,": ",t.name),l.a.createElement("button",{className:"button is-rounded is-super-small is-pulled-right ml-1",onClick:function(){return console.log("Not sure what this does atm")}},l.a.createElement(v.a,{icon:A.faPhone})),l.a.createElement("button",{className:"button is-rounded is-super-small is-pulled-right",onClick:function(){return e=_,void console.log("Sending Business ".concat(e," a text.."));var e}},l.a.createElement(v.a,{icon:A.faComment})))),l.a.createElement("th",{style:{width:"20%"}}),l.a.createElement("th",{style:{width:"20%"}}),l.a.createElement("th",{style:{width:"20%"}}),l.a.createElement("th",{style:{width:"20%"}},l.a.createElement("button",{className:"button is-super-small is-pulled-right",onClick:function(){return u((function(e){return!e}))}},l.a.createElement(v.a,{icon:s?A.faCaretDown:A.faCaretUp})),!s&&l.a.createElement("button",{className:"button is-super-small is-pulled-right mr-1",onClick:function(){return r.handleEdit("edit",a)}},l.a.createElement(v.a,{icon:A.faPlus}))))),l.a.createElement("tbody",{className:"is-bordered has-text-centered",hidden:s},l.a.createElement("tr",null,l.a.createElement("td",null,"Business Image",l.a.createElement("br",null),l.a.createElement("img",{src:t.image,alt:"".concat(t.name),width:"48",height:"48"})),l.a.createElement("td",null,"Registered At",l.a.createElement("br",null),t.registered),l.a.createElement("td",null,"Type",l.a.createElement("br",null),t.type),l.a.createElement("td",null,l.a.createElement("div",{style:{width:"215%"}},"Description",l.a.createElement("br",null),t.description)),l.a.createElement("td",{style:{borderLeft:"hidden"}})),l.a.createElement("tr",null,l.a.createElement("td",null,l.a.createElement("div",{style:{width:"215%"}},"Address",l.a.createElement("br",null),f)),l.a.createElement("td",{style:{borderLeft:"hidden"}}),l.a.createElement("td",null,"Business Hours",l.a.createElement("br",null),l.a.createElement(le,{type:t.hours})),l.a.createElement("td",null,"Delivery Hours",l.a.createElement("br",null),l.a.createElement(le,{type:t.delivery_hours})),l.a.createElement("td",null,"Accepting Hours",l.a.createElement("br",null),l.a.createElement(le,{type:t.accepting_hours}))),l.a.createElement("tr",null,l.a.createElement("td",null,"Contact Person",l.a.createElement("br",null),"".concat(t.contact_first_name," ").concat(t.contact_last_name)),l.a.createElement("td",null,"Phone #1: ",t.phone,l.a.createElement("br",null),"Phone #2: ",t.phone2),l.a.createElement("td",null,"Email",l.a.createElement("br",null),t.email),l.a.createElement("td",null,"Notification Approval",l.a.createElement("br",null),t.notification_approval),l.a.createElement("td",null,"Notification Device",l.a.createElement("br",null),t.notification_device_id)),l.a.createElement(G,{numColumns:5,showMore:h,setShowMore:p}),h&&l.a.createElement(l.a.Fragment,null,l.a.createElement("tr",null,l.a.createElement("td",null,"Business License #",l.a.createElement("br",null),t.license),l.a.createElement("td",null,"Business License Expiration",l.a.createElement("br",null)),l.a.createElement("td",null,"Business Password",l.a.createElement("br",null),t.password),l.a.createElement("td",null),l.a.createElement("td",null,"Available Zones",l.a.createElement("br",null),t.available_zones)),l.a.createElement("tr",null,l.a.createElement("td",null,"EIN #",l.a.createElement("br",null),t.EIN),l.a.createElement("td",null,"US DOT #",l.a.createElement("br",null),t.USDOT),l.a.createElement("td",null,"WA UBI #",l.a.createElement("br",null),t.WAUBI),l.a.createElement("td",null),l.a.createElement("td",null,"Can Deliver:",l.a.createElement(v.a,{icon:t.delivery?A.faCheck:A.faTimes,color:t.delivery?"green":"red",className:"ml-2",style:{position:"relative",top:"0.05rem"}}),l.a.createElement("br",null),"Can Cancel:",l.a.createElement(v.a,{icon:t.can_cancel?A.faCheck:A.faTimes,color:t.can_cancel?"green":"red",className:"ml-2",style:{position:"relative",top:"0.05rem"}}),l.a.createElement("br",null),"Is Reusable:",l.a.createElement(v.a,{icon:t.reusable?A.faCheck:A.faTimes,color:t.reusable?"green":"red",className:"ml-2",style:{position:"relative",top:"0.05rem"}})))))))}function de(e){var t=e.business,a=e.id,r=Object(o.a)(e,["business","id"]),c=Object(n.useState)(t),i=Object(E.a)(c,2),s=i[0],u=i[1],m=t!==ue,d=function(e,t){e.persist(),console.log(e.target,e.target.checked,e.target.value),u((function(a){return Object(b.a)(Object(b.a)({},a),{},Object(h.a)({},t,"checkbox"!==e.target.type?e.target.value:Number(e.target.checked)))}))};return l.a.createElement(l.a.Fragment,null,!m&&l.a.createElement(l.a.Fragment,null,l.a.createElement("button",{className:"button is-small mx-1 is-danger is-outlined is-rounded",style:{marginBottom:"1rem"},onClick:function(){return r.handleEdit("cancel")}},l.a.createElement(v.a,{icon:A.faTimes,className:"mr-2"}),"Cancel"),l.a.createElement("button",{className:"button is-small mx-1 is-success is-outlined is-rounded",onClick:function(){return r.handleEdit("save",void 0,s,t)}},l.a.createElement(v.a,{icon:A.faCheck,className:"mr-2"}),"Save")),l.a.createElement("div",{className:"box list-item"},l.a.createElement("table",{className:"table is-hoverable is-fullwidth is-size-7",style:{backgroundColor:"#f8f7fa"}},l.a.createElement("thead",null,l.a.createElement("tr",{className:"list-item-head"},l.a.createElement("th",{style:{width:"20%"}},l.a.createElement("div",{style:{width:"300%",maxWidth:"325px"}},l.a.createElement("span",null,m?"Business ".concat(Number(a.substring(a.indexOf("-")+1,a.length)),": "):"New Business: "),l.a.createElement(Y,{type:"name",value:s.name,className:"ml-1",style:{width:"50%"},handleChange:d}))),l.a.createElement("th",{style:{width:"20%"}}),l.a.createElement("th",{style:{width:"20%"}}),l.a.createElement("th",{style:{width:"20%"}}),l.a.createElement("th",{style:{width:"20%"}},m&&l.a.createElement(l.a.Fragment,null,l.a.createElement("button",{className:"button is-super-small is-pulled-right",onClick:function(){return r.handleEdit("save",a,s,t)}},l.a.createElement(v.a,{icon:A.faCheck})),l.a.createElement("button",{className:"button is-super-small is-pulled-right mr-1",onClick:function(){return r.handleEdit("cancel")}},l.a.createElement(v.a,{icon:A.faTimes})))))),l.a.createElement("tbody",{className:"is-bordered has-text-centered"},l.a.createElement("tr",null,l.a.createElement("td",null,"Business Image",l.a.createElement("br",null),l.a.createElement(Y,{type:"image",value:s.image,placeholder:"Image URL",handleChange:d})),l.a.createElement("td",null,"Registered At",l.a.createElement("br",null),l.a.createElement(Y,{type:"registered",value:s.registered,handleChange:d})),l.a.createElement("td",null,"Type",l.a.createElement("br",null),l.a.createElement(Y,{type:"type",value:s.type,handleChange:d})),l.a.createElement("td",null,l.a.createElement("div",{style:{width:"215%"}},"Description",l.a.createElement("br",null),l.a.createElement(Y,{type:"description",value:s.description,handleChange:d,textarea:!0}))),l.a.createElement("td",{style:{borderLeft:"hidden"}})),l.a.createElement("tr",null,l.a.createElement("td",null,l.a.createElement("div",{style:{width:"215%"}},"Address",l.a.createElement("br",null),l.a.createElement("div",{style:{display:"flex",flexWrap:"wrap"}},l.a.createElement(Y,{type:"street",value:s.street,className:"mr-1 mb-1",style:{width:"65%"},placeholder:"Street",handleChange:d}),l.a.createElement(Y,{type:"unit",value:s.unit,className:"mr-1 mb-1",style:{width:"30%"},placeholder:"Unit (optional)",handleChange:d}),l.a.createElement(Y,{type:"city",value:s.city,className:"mr-1 mb-1",style:{width:"43.5%"},placeholder:"City",handleChange:d}),l.a.createElement(Y,{type:"state",value:s.state,className:"mr-1 mb-1",style:{width:"20%"},placeholder:"State",handleChange:d}),l.a.createElement(Y,{type:"zip",value:s.zip,style:{width:"30.25%"},placeholder:"ZIP Code",handleChange:d})))),l.a.createElement("td",{style:{borderLeft:"hidden"}}),l.a.createElement("td",null,"Business Hours",l.a.createElement("br",null),l.a.createElement(Y,{type:"hours",value:s.hours,handleChange:d})),l.a.createElement("td",null,"Delivery Hours",l.a.createElement("br",null),l.a.createElement(Y,{type:"delivery_hours",value:s.delivery_hours,handleChange:d})),l.a.createElement("td",null,"Accepting Hours",l.a.createElement("br",null),l.a.createElement(Y,{type:"accepting_hours",value:s.accepting_hours,handleChange:d}))),l.a.createElement("tr",null,l.a.createElement("td",null,"Contact Person",l.a.createElement("br",null),l.a.createElement("div",{className:"level"},l.a.createElement(Y,{type:"contact_first_name",value:s.contact_first_name,className:"level-item mr-1",style:{maxWidth:"65%"},placeholder:"First & Middle",handleChange:d}),l.a.createElement(Y,{type:"contact_last_name",value:s.contact_last_name,className:"level-item",style:{maxWidth:"30%"},placeholder:"Last",handleChange:d}))),l.a.createElement("td",null,"Phone #1:",l.a.createElement(Y,{type:"phone",value:s.phone,className:"ml-1 mb-1",style:{maxWidth:"60%"},handleChange:d}),l.a.createElement("br",null),"Phone #2:",l.a.createElement(Y,{type:"phone2",value:s.phone2,className:"ml-1",style:{maxWidth:"60%"},handleChange:d})),l.a.createElement("td",null,"Email",l.a.createElement("br",null),l.a.createElement(Y,{type:"email",value:s.email,handleChange:d})),l.a.createElement("td",null,"Notification Approval",l.a.createElement("br",null),l.a.createElement(Y,{type:"notification_approval",value:s.notification_approval,handleChange:d})),l.a.createElement("td",null,"Notification Device",l.a.createElement("br",null),l.a.createElement(Y,{type:"notification_device_id",value:s.notification_device_id,handleChange:d}))),l.a.createElement(G,{numColumns:5}),l.a.createElement("tr",null,l.a.createElement("td",null,"Business License #",l.a.createElement("br",null),t.license,l.a.createElement(Y,{type:"license",value:s.license,handleChange:d})),l.a.createElement("td",null,"Business License Expiration",l.a.createElement("br",null)),l.a.createElement("td",null,"Business Password",l.a.createElement("br",null),l.a.createElement(Y,{type:"password",value:s.password,handleChange:d,textarea:!0})),l.a.createElement("td",null),l.a.createElement("td",null,"Available Zones",l.a.createElement("br",null),l.a.createElement(Y,{type:"available_zones",value:s.available_zones,handleChange:d}))),l.a.createElement("tr",null,l.a.createElement("td",null,"EIN #",l.a.createElement("br",null),l.a.createElement(Y,{type:"EIN",value:s.EIN,handleChange:d})),l.a.createElement("td",null,"US DOT #",l.a.createElement("br",null),l.a.createElement(Y,{type:"USDOT",value:s.USDOT,handleChange:d})),l.a.createElement("td",null,"WA UBI #",l.a.createElement("br",null),l.a.createElement(Y,{type:"WAUBI",value:s.WAUBI,handleChange:d})),l.a.createElement("td",null),l.a.createElement("td",null,"Can Deliver:",l.a.createElement(Y,{type:"delivery",value:Boolean(s.delivery),className:"ml-1",handleChange:d,checkbox:!0}),l.a.createElement("br",null),"Can Cancel:",l.a.createElement(Y,{type:"can_cancel",value:Boolean(s.can_cancel),className:"ml-1",handleChange:d,checkbox:!0}),l.a.createElement("br",null),"Is Reusable:",l.a.createElement(Y,{type:"reusable",value:Boolean(s.reusable),className:"ml-1",handleChange:d,checkbox:!0})))))))}var Ee=function(e){var t=e.businesses,a=Object(o.a)(e,["businesses"]);console.log("rendering businesses..");var r=Object(n.useState)(Object.entries(t)),c=Object(E.a)(r,2),i=c[0],s=c[1],u=Object(n.useState)(),m=Object(E.a)(u,2),d=m[0],h=m[1];Object(n.useEffect)((function(){var e=Object.entries(t);a.filter?s((function(){return e.filter((function(e){return e[1][a.filter.option]==a.filter.value}))})):s(e)}),[t,a.filter]);var p=function(e,t,a,n){if(console.log("adding business........."),"edit"===e)h(t);else if("add"===e)h("add");else{if("save"===e){var l=Object(b.a)(Object(b.a)(Object(b.a)(Object(b.a)(Object(b.a)(Object(b.a)(Object(b.a)(Object(b.a)(Object(b.a)(Object(b.a)(Object(b.a)(Object(b.a)(Object(b.a)(Object(b.a)(Object(b.a)(Object(b.a)(Object(b.a)(Object(b.a)(Object(b.a)(Object(b.a)(Object(b.a)(Object(b.a)(Object(b.a)(Object(b.a)(Object(b.a)(Object(b.a)(Object(b.a)(Object(b.a)(Object(b.a)(Object(b.a)({},(!t||a.registered!==n.registered)&&{business_created_at:a.registered}),(!t||a.name!==n.name)&&{business_name:a.name}),(!t||a.type!==n.type)&&{business_type:a.type}),(!t||a.description!==n.description)&&{business_desc:a.description}),(!t||a.contact_first_name!==n.contact_first_name)&&{business_contact_first_name:a.contact_first_name}),(!t||a.contact_last_name!==n.contact_last_name)&&{business_contact_last_name:a.contact_last_name}),(!t||a.phone!==n.phone)&&{business_phone_num:a.phone}),(!t||a.phone2!==n.phone2)&&{business_phone_num2:a.phone2}),(!t||a.email!==n.email)&&{business_email:a.email}),(!t||a.hours!==n.hours)&&{business_hours:a.hours}),(!t||a.accepting_hours!==n.accepting_hours)&&{business_accepting_hours:a.accepting_hours}),(!t||a.delivery_hours!==n.delivery_hours)&&{business_delivery_hours:a.delivery_hours}),(!t||a.street!==n.street)&&{business_address:a.street}),(!t||a.unit!==n.unit)&&{business_unit:a.unit}),(!t||a.city!==n.city)&&{business_city:a.city}),(!t||a.state!==n.state)&&{business_state:a.state}),(!t||a.zip!==n.zip)&&{business_zip:a.zip}),(!t||a.latitude!==n.latitude)&&{business_latitude:"".concat(a.latitude)}),(!t||a.longitude!==n.longitude)&&{business_longitude:"".concat(a.longitude)}),(!t||a.EIN!==n.EIN)&&{business_EIN:a.EIN}),(!t||a.WAUBI!==n.WAUBI)&&{business_WAUBI:a.WAUBI}),(!t||a.license!==n.license)&&{business_license:a.license}),(!t||a.USDOT!==n.USDOT)&&{business_USDOT:a.USDOT}),(!t||a.notification_approval!==n.notification_approval)&&{notification_approval:a.notification_approval}),(!t||a.notification_device_id!==n.notification_device_id)&&{notification_device_id:a.notification_device_id}),(!t||a.can_cancel!==n.can_cancel)&&{can_cancel:"".concat(a.can_cancel)}),(!t||a.delivery!==n.delivery)&&{delivery:"".concat(a.delivery)}),(!t||a.reusable!==n.reusable)&&{reusable:"".concat(a.reusable)}),(!t||a.image!==n.image)&&{business_image:a.image}),(!t||a.password!==n.password)&&{business_password:a.password}),r=U+(t?"Businesses":"insertNewBusiness"),c=t?{business_uid:t,new_data:l}:l;console.log(r,c),X("business",c)&&W.a.post(r,c).then((function(e){console.log(e)})).catch((function(e){console.log(e.response?e.response:e)}))}h()}};return l.a.createElement(l.a.Fragment,null,"add"!==d&&l.a.createElement("button",{className:"button is-small mx-1 is-success is-outlined is-rounded",style:{marginBottom:"1rem"},onClick:function(){return p("add")}},l.a.createElement(v.a,{icon:A.faPlus,className:"mr-2"}),"Add Business"),"add"===d&&l.a.createElement(de,{business:ue,id:d,handleEdit:p}),i.map((function(e,t){return l.a.createElement(l.a.Fragment,{key:t},d!==e[0]?l.a.createElement(me,{index:t,business:e[1],id:e[0],dispatch:a.dispatch,handleEdit:p}):l.a.createElement(de,{business:e[1],id:e[0],handleEdit:p}))})))};function he(e){var t=e.customer,a=e.id,r=(Object(o.a)(e,["customer","id"]),Object(n.useState)(!0)),c=Object(E.a)(r,2),i=c[0],s=c[1],u=Object(n.useState)(!1),m=Object(E.a)(u,2),d=m[0],h=m[1],b="".concat(t.street).concat(t.unit?" ".concat(t.unit):""," ").concat(t.city," ").concat(t.state," ").concat(t.zip),p=Number(a.substring(a.indexOf("-")+1,a.length));return l.a.createElement("div",{className:"box list-item"},l.a.createElement("table",{className:"table is-hoverable is-fullwidth is-size-7",style:{backgroundColor:"#f8f7fa"}},l.a.createElement("thead",null,l.a.createElement("tr",{className:"list-item-head"},l.a.createElement("th",{style:{width:"20%"}},l.a.createElement("div",{style:{width:"200%",maxWidth:"240px"}},l.a.createElement("span",null,"Customer ",p,": ","".concat(t.first_name," ").concat(t.last_name[0],".")),l.a.createElement("button",{className:"button is-rounded is-pulled-right is-super-small ml-1"},l.a.createElement(v.a,{icon:A.faEnvelope})),l.a.createElement("button",{className:"button is-rounded is-pulled-right is-super-small"},l.a.createElement(v.a,{icon:A.faComment})))),l.a.createElement("th",{style:{width:"20%"}}),l.a.createElement("th",{style:{width:"20%"}}),l.a.createElement("th",{style:{width:"20%"}}),l.a.createElement("th",{style:{width:"20%"}},l.a.createElement("button",{className:"button is-super-small is-pulled-right",onClick:function(){return s((function(e){return!e}))}},l.a.createElement(v.a,{icon:i?A.faCaretDown:A.faCaretUp}))))),l.a.createElement("tbody",{className:"is-bordered has-text-centered",hidden:i},l.a.createElement("tr",null,l.a.createElement("td",null,l.a.createElement("div",{className:"level",style:{width:"215%"}},l.a.createElement("div",{className:"level-item"},l.a.createElement("span",{style:{width:"100%",textAlign:"left"}},"First & Middle Name:",l.a.createElement("hr",{style:{margin:0,backgroundColor:"#ededed"}}),"Last Name:")),l.a.createElement("div",{className:"level-item"},l.a.createElement("span",{style:{width:"100%",textAlign:"left"}},t.first_name,l.a.createElement("hr",{style:{margin:0,backgroundColor:"#ededed"}}),t.last_name)))),l.a.createElement("td",{style:{borderLeft:"hidden"}}),l.a.createElement("td",null,"Phone #",l.a.createElement("br",null),t.phone),l.a.createElement("td",null,"SMS Frequency",l.a.createElement("br",null),t.SMS_frequency),l.a.createElement("td",null,"SMS Last Notification",l.a.createElement("br",null),t.SMS_last_notification)),l.a.createElement("tr",null,l.a.createElement("td",null,l.a.createElement("div",{style:{width:"215%"}},"Address",l.a.createElement("br",null),b)),l.a.createElement("td",{style:{borderLeft:"hidden"}}),l.a.createElement("td",null,"Email: ",t.email),l.a.createElement("td",null,"Notification Approval",l.a.createElement("br",null),t.notification_approval),l.a.createElement("td",null,"Notification ID",l.a.createElement("br",null),t.notification_id)),l.a.createElement(G,{numColumns:5,showMore:d,setShowMore:h}),d&&l.a.createElement(l.a.Fragment,null,l.a.createElement("tr",null,l.a.createElement("td",null,"Account Verified",l.a.createElement("br",null),l.a.createElement(v.a,{icon:t.verified?A.faCheck:A.faTimes,color:t.verified?"green":"red"})),l.a.createElement("td",null,l.a.createElement("div",{style:{width:"415%"}},l.a.createElement("div",{className:"level"},l.a.createElement("div",{className:"level-item"},"Password Salt",l.a.createElement("br",null),t.password_salt),l.a.createElement("div",{className:"level-item",style:{display:"inline-block",width:"33%"}},"Password Hash",l.a.createElement("br",null),t.password_hash),l.a.createElement("div",{className:"level-item"},"Password Algorithm",l.a.createElement("br",null),t.password_algorithm)))),l.a.createElement("td",{style:{borderLeft:"hidden"}}),l.a.createElement("td",{style:{borderLeft:"hidden"}}),l.a.createElement("td",{style:{borderLeft:"hidden"}})),l.a.createElement("tr",null,l.a.createElement("td",null,"Referral Source",l.a.createElement("br",null),t.referral_source),l.a.createElement("td",null,"Role",l.a.createElement("br",null),t.role),l.a.createElement("td",null,"Last Update",l.a.createElement("br",null),t.last_update),l.a.createElement("td",null,"Customer Representative",l.a.createElement("br",null),t.customer_rep),l.a.createElement("td",null,"Routes",l.a.createElement("br",null),t.route_id))))))}var be=function(e){var t=e.customers,a=Object(o.a)(e,["customers"]);console.log("rendering customers..");var r=Object(n.useState)(Object.entries(t)),c=Object(E.a)(r,2),i=c[0],s=c[1];return Object(n.useEffect)((function(){var e=Object.entries(t);a.filter?s((function(){return e.filter((function(e){return e[1][a.filter.option]==a.filter.value}))})):s(e)}),[t,a.filter]),l.a.createElement(l.a.Fragment,null,i.map((function(e,t){return l.a.createElement(he,{key:t,index:t,customer:e[1],id:e[0]})})))};function pe(e){var t=e.vehicle,a=e.id;Object(o.a)(e,["vehicle","id"]);return l.a.createElement("tr",null,l.a.createElement("td",null,a),l.a.createElement("td",null,"N/A"),l.a.createElement("td",null,t.vehicle_make,l.a.createElement("br",null),t.vehicle_model,", ",t.vehicle_year),l.a.createElement("td",null,t.registration),l.a.createElement("td",null,t.registration_expiration),l.a.createElement("td",null,t.insurance_carrier),l.a.createElement("td",null,t.insurance_number),l.a.createElement("td",null,t.insurance_expiration),l.a.createElement("td",null,t.drivers&&!0))}var ve=function(e){var t=e.vehicles;Object(o.a)(e,["vehicles"]),console.log("rendering vehicles..");var a=Object(n.useState)(Object.entries(t)),r=Object(E.a)(a,2),c=r[0];return r[1],l.a.createElement("table",{className:"table is-fullwidth is-size-7 is-bordered has-text-centered vcenter-items"},l.a.createElement("thead",null,l.a.createElement("tr",null,l.a.createElement("th",null,"Vehicle ID"),l.a.createElement("th",null,"Business Name"),l.a.createElement("th",null,"Vehicle Make",l.a.createElement("br",null),l.a.createElement("span",{style:{fontSize:"0.65rem"}},"Model, Year")),l.a.createElement("th",null,"Vehicle Registration"),l.a.createElement("th",null,"Vehicle Registration Expiration"),l.a.createElement("th",null,"Insurance Carrier"),l.a.createElement("th",null,"Insurance Policy"),l.a.createElement("th",null,"Insurance Policy Expiration"),l.a.createElement("th",null,"Drivers"))),l.a.createElement("tbody",null,c.map((function(e,t){return l.a.createElement(pe,{key:t,index:t,vehicle:e[1],id:e[0]})}))))};var fe=function(e){var t=e.type,a=e.data,n=e.update,r=e.typeOf;return Object(o.a)(e,["type","data","update","typeOf"]),l.a.createElement("span",{className:"fa-layers no-select ml-1",style:{cursor:"pointer"},onClick:function(){console.log("testy"),n((function(e){var a=e.sortBy===t?-e.value:-1;return{sortBy:t,value:a,list:Object(k.a)(e.list).sort((function(n,l){switch(r){case"number":return 1===a?n[1][t]-l[1][t]:l[1][t]-n[1][t];case"string":if("id"===t)return 1===a?n[0].localeCompare(l[0]):l[0].localeCompare(n[0]);if(t.includes("name")){var c=t.substring(0,t.indexOf("-"))?"".concat(t.substring(0,t.indexOf("-")),"_"):"",i="".concat(n[1]["".concat(c,"first_name")]," ").concat(n[1]["".concat(c,"last_name")]),s="".concat(l[1]["".concat(c,"first_name")]," ").concat(l[1]["".concat(c,"last_name")]);return 1===a?i.localeCompare(s):s.localeCompare(i)}if(t.includes("address"))t.substring(0,t.indexOf("-"));return 1===a?n[1].localeCompare(l[1]):l[1].localeCompare(n[1]);default:return e}}))}}))}},a.sortBy===t?l.a.createElement(l.a.Fragment,null,l.a.createElement(v.a,{icon:A.faSortUp,color:1===a.value?"black":"lightgrey"}),l.a.createElement(v.a,{icon:A.faSortDown,color:-1===a.value?"black":"lightgrey"})):l.a.createElement(v.a,{icon:A.faSort,color:"lightgrey"}))};function _e(e){var t=e.purchase,a=e.id,n=(Object(o.a)(e,["purchase","id"]),"".concat(t.delivery_street).concat(t.delivery_unit?" ".concat(t.delivery_unit):""," \n                   ").concat(t.delivery_city," ").concat(t.delivery_state," ").concat(t.delivery_zip));JSON.parse(t.items);return l.a.createElement("tr",null,l.a.createElement("td",null,a),l.a.createElement("td",null,t.purchase_date),l.a.createElement("td",null,t.customer_id),l.a.createElement("td",null,"".concat(t.delivery_first_name," ").concat(t.delivery_last_name)),l.a.createElement("td",null,"Address: ",l.a.createElement("br",null),n,l.a.createElement("br",null),l.a.createElement("br",null),"Phone #: ",l.a.createElement("br",null),t.delivery_phone,l.a.createElement("br",null),"Email: ",l.a.createElement("br",null),t.delivery_email),l.a.createElement("td",null,"$",t.cost),l.a.createElement("td",null,t.items),l.a.createElement("td",null,l.a.createElement(v.a,t.hasPaid?{icon:A.faCheck,color:"green"}:{icon:A.faTimes,color:"red"})),l.a.createElement("td",null,t.order_type),l.a.createElement("td",null,t.business_id),l.a.createElement("td",null,t.purchase_status),l.a.createElement("td",null,"N/A"),l.a.createElement("td",null,"N/A"),l.a.createElement("td",null,"N/A"),l.a.createElement("td",null,"N/A"),l.a.createElement("td",null,"N/A"),l.a.createElement("td",null,"N/A"),l.a.createElement("td",null,t.purchase_notes),l.a.createElement("td",null,l.a.createElement("p",null,"Order Instructions: ",t.order_instructions),l.a.createElement("br",null),l.a.createElement("p",null,"Delivery Instructions: ",t.delivery_instructions)),l.a.createElement("td",{className:"has-text-centered"},l.a.createElement("button",{className:"button is-rounded is-super-small my-1"},l.a.createElement(v.a,{icon:A.faPhone})),l.a.createElement("br",null),l.a.createElement("button",{className:"button is-rounded is-super-small my-1"},l.a.createElement(v.a,{icon:A.faComment})),l.a.createElement("br",null),l.a.createElement("button",{className:"button is-rounded is-super-small my-1"},l.a.createElement(v.a,{icon:A.faEnvelope}))))}var ye=function(e){var t=e.purchases;Object(o.a)(e,["purchases"]),console.log("rendering purchases..");var a=Object(n.useState)({sortBy:"",value:0,list:Object.entries(t)}),r=Object(E.a)(a,2),c=r[0],i=r[1];return l.a.createElement("table",{className:"table is-fullwidth is-size-7 is-bordered has-text-centered vcenter-items"},l.a.createElement("thead",null,l.a.createElement("tr",null,l.a.createElement("th",null,"Purchase ID",l.a.createElement(fe,{type:"id",typeOf:"string",data:c,update:i})),l.a.createElement("th",null,"Purchase Date"),l.a.createElement("th",null,"Customer ID"),l.a.createElement("th",null,"Delivery Name",l.a.createElement(fe,{type:"delivery-name",typeOf:"string",data:c,update:i})),l.a.createElement("th",null,"Delivery Info"),l.a.createElement("th",null,"Amount",l.a.createElement(fe,{type:"cost",typeOf:"number",data:c,update:i})),l.a.createElement("th",null,"Items"),l.a.createElement("th",null,"Paid"),l.a.createElement("th",null,"Order Type"),l.a.createElement("th",null,"Business ID",l.a.createElement(fe,{type:"business_id",typeOf:"string",data:c,update:i})),l.a.createElement("th",null,"Purchase Status"),l.a.createElement("th",null,"Delivery #"),l.a.createElement("th",null,"Route"),l.a.createElement("th",null,"Driver"),l.a.createElement("th",null,"Delivery Date"),l.a.createElement("th",null,"Delivery ETA"),l.a.createElement("th",null,"Delivered"),l.a.createElement("th",null,"Purchase Notes"),l.a.createElement("th",null,"Additional Instructions"),l.a.createElement("th",null,"Contact Customer"))),l.a.createElement("tbody",null,c.list.map((function(e,t){return l.a.createElement(_e,{key:t,index:t,purchase:e[1],id:e[0]})}))))};function ge(e){var t=e.payment,a=e.id;Object(o.a)(e,["payment","id"]);return l.a.createElement("tr",null,l.a.createElement("td",null,a),l.a.createElement("td",null,t.purchase_id),l.a.createElement("td",null,"N/A"),l.a.createElement("td",null,t.payment_time_stamp),l.a.createElement("td",null,t.start_delivery_date),l.a.createElement("td",null,t.coupon_id),l.a.createElement("td",null,t.amount_due),l.a.createElement("td",null,t.amount_discount),l.a.createElement("td",null,t.amount_paid),l.a.createElement("td",null,t.charge_id),l.a.createElement("td",null,t.payment_type),l.a.createElement("td",null,t.info_is_Addon),l.a.createElement("td",null,t.credit_card_num),l.a.createElement("td",null,t.credit_card_cvv),l.a.createElement("td",null,t.credit_card_expiration),l.a.createElement("td",null,t.credit_card_zip))}var Ne=function(e){var t=e.payments;Object(o.a)(e,["payments"]),console.log("rendering payments..");var a=Object(n.useState)(Object.entries(t)),r=Object(E.a)(a,2),c=r[0];return r[1],l.a.createElement("table",{className:"table is-fullwidth is-size-7 is-bordered has-text-centered vcenter-items"},l.a.createElement("thead",null,l.a.createElement("tr",null,l.a.createElement("th",null,"Payment ID"),l.a.createElement("th",null,"Purchase ID"),l.a.createElement("th",null,"Payment Date"),l.a.createElement("th",null,"Payment Time Stamp"),l.a.createElement("th",null,"Delivery Start Date"),l.a.createElement("th",null,"Coupon ID"),l.a.createElement("th",null,"Amount Due"),l.a.createElement("th",null,"Discount"),l.a.createElement("th",null,"Amount Paid"),l.a.createElement("th",null,"Charge ID"),l.a.createElement("th",null,"Payment Type"),l.a.createElement("th",null,"Info"),l.a.createElement("th",null,"Credit Card #"),l.a.createElement("th",null,"Credit Card CVV"),l.a.createElement("th",null,"Credit Card Expiration"),l.a.createElement("th",null,"Credit Card Zip"))),l.a.createElement("tbody",null,c.map((function(e,t){return l.a.createElement(ge,{key:t,index:t,payment:e[1],id:e[0]})}))))};function Oe(e){var t=e.coupon,a=e.id;Object(o.a)(e,["coupon","id"]);return l.a.createElement("tr",null,l.a.createElement("td",null,l.a.createElement(v.a,{icon:A.faTrash,color:"TRUE"===t.valid?"red":"lightgrey",className:"mr-1",style:{cursor:"TRUE"===t.valid?"pointer":"not-allowed"},title:"TRUE"===t.valid?"Disable Coupon":"Coupon Disabled",onClick:function(){return"TRUE"===t.valid&&function(e,t){console.log(e,t),W.a.post(U+"disable".concat(e.charAt(0).toUpperCase()+e.slice(1)),Object(h.a)({},"".concat(e,"_uid"),t)).then((function(e){console.log(e)})).catch((function(e){console.log(e)}))}("coupon",a)}}),a),l.a.createElement("td",null,t.code),l.a.createElement("td",null,l.a.createElement(v.a,{icon:"TRUE"===t.valid?A.faCheck:A.faTimes,color:"TRUE"===t.valid?"green":"red"})),l.a.createElement("td",null,"$",t.discount_amount),l.a.createElement("td",null,t.discount_percent,"%"),l.a.createElement("td",null,t.discount_shipping),l.a.createElement("td",null,"N/A"),l.a.createElement("td",null,t.expire_date),l.a.createElement("td",null,t.limits),l.a.createElement("td",null,t.notes),l.a.createElement("td",null,t.num_used),l.a.createElement("td",null,l.a.createElement(v.a,{icon:"T"===t.recurring?A.faCheck:A.faTimes,color:"T"===t.recurring?"green":"red"})),l.a.createElement("td",null,t.email),l.a.createElement("td",null,t.business_id))}function je(e){var t=e.refund,a=e.id;Object(o.a)(e,["refund","id"]);return l.a.createElement("tr",null,l.a.createElement("td",null,a),l.a.createElement("td",null,t.created_at),l.a.createElement("td",null,t.email),l.a.createElement("td",null,t.phone),l.a.createElement("td",null,l.a.createElement("img",{src:t.image,alt:"refund",width:"48",height:"48"})),l.a.createElement("td",null,t.customer_note),l.a.createElement("td",null,t.refund_amount),l.a.createElement("td",null,t.coupon_id),l.a.createElement("td",null,t.admin_note))}function we(e){var t=e.dataType,a=Object(o.a)(e,["dataType"]),r=Object(n.useState)({}),c=Object(E.a)(r,2),i=c[0],s=c[1],u=function(e,t){e.persist(),console.log(e.target,e.target.checked,e.target.value),s((function(a){return Object(b.a)(Object(b.a)({},a),{},Object(h.a)({},t,"checkbox"!==e.target.type?e.target.value:Number(e.target.checked)))}))};return l.a.createElement(l.a.Fragment,null,l.a.createElement("button",{className:"button is-small mx-1 is-danger is-outlined is-rounded",style:{marginBottom:"1rem"},onClick:function(){return a.setForm()}},l.a.createElement(v.a,{icon:A.faTimes,className:"mr-2"}),"Cancel"),l.a.createElement("button",{className:"button is-small mx-1 is-success is-outlined is-rounded",onClick:function(){return function(){var e=Object(b.a)({},i);"coupon"===t&&(e.valid=i.valid?"TRUE":"FALSE",e.recurring=i.recurring?"T":"F"),console.log(e),W.a.post(U+"insertNew".concat(t.charAt(0).toUpperCase()+t.slice(1)),e).then((function(e){console.log(e)})).catch((function(e){console.log(e)})),a.setForm()}()}},l.a.createElement(v.a,{icon:A.faCheck,className:"mr-2"}),"Save"),l.a.createElement("div",{className:"box form-item",style:{width:"480px"}},"coupon"===t?l.a.createElement(l.a.Fragment,null,l.a.createElement(Y,{type:"coupon_id",value:i.coupon_id||"",placeholder:"Coupon Code",handleChange:u}),l.a.createElement("div",{className:"mb-5"},l.a.createElement(Y,{type:"valid",value:i.valid||0,handleChange:u,checkbox:!0}),l.a.createElement("span",{className:"is-size-7 ml-1 mr-5"},"Valid"),l.a.createElement(Y,{type:"recurring",value:i.recurring||0,handleChange:u,checkbox:!0}),l.a.createElement("span",{className:"is-size-7 mx-1"},"Recurring")),l.a.createElement(Y,{type:"discount_percent",value:i.discount_percent||"",placeholder:"Discount Percentage",handleChange:u}),l.a.createElement(Y,{type:"discount_amount",value:i.discount_amount||"",placeholder:"Discount Amount",handleChange:u}),l.a.createElement(Y,{type:"discount_shipping",value:i.discount_shipping||"",className:"mb-5",placeholder:"Discount Shipping",handleChange:u}),l.a.createElement(Y,{type:"expire_date",value:i.expire_date||"",placeholder:"Expiration Date",handleChange:u}),l.a.createElement(Y,{type:"limits",value:i.limits||"",placeholder:"Limits",handleChange:u}),l.a.createElement(Y,{type:"notes",value:i.notes||"",className:"mb-5",placeholder:"Notes",handleChange:u,textarea:!0}),l.a.createElement(Y,{type:"num_used",value:i.num_used||"",className:"mb-5",placeholder:"Times Used",handleChange:u}),l.a.createElement(Y,{type:"email_id",value:i.email_id||"",placeholder:"Email",handleChange:u}),l.a.createElement(Y,{type:"cup_business_uid",value:i.cup_business_uid||"",placeholder:"Business ID",handleChange:u})):l.a.createElement(l.a.Fragment,null,l.a.createElement(Y,{type:"created_at",value:i.created_at||"",className:"mb-5",placeholder:"Created At",handleChange:u}),l.a.createElement(Y,{type:"email_id",value:i.email_id||"",placeholder:"Email",handleChange:u}),l.a.createElement(Y,{type:"phone_num",value:i.phone_num||"",className:"mb-5",placeholder:"Phone Number",handleChange:u}),l.a.createElement(Y,{type:"image_url",value:i.image_url||"",className:"mb-5",placeholder:"Image URL",handleChange:u}),l.a.createElement(Y,{type:"customer_note",value:i.customer_note||"",placeholder:"Customer Notes",handleChange:u,textarea:!0}),l.a.createElement(Y,{type:"admin_note",value:i.admin_note||"",className:"mt-1 mb-5",placeholder:"Admin Notes",handleChange:u,textarea:!0}),l.a.createElement(Y,{type:"refund_amount",value:i.refund_amount||"",placeholder:"Refund Amount",handleChange:u}),l.a.createElement(Y,{type:"ref_coupon_id",value:i.ref_coupon_id||"",placeholder:"Coupon ID",handleChange:u}))))}var Ce=function(e){var t=e.coupons,a=e.refunds;Object(o.a)(e,["coupons","refunds"]),console.log("rendering coupons..");var r=Object(n.useState)(Object.entries(t)),c=Object(E.a)(r,2),i=c[0],s=(c[1],Object(n.useState)(Object.entries(a))),u=Object(E.a)(s,2),m=u[0],d=(u[1],Object(n.useState)()),h=Object(E.a)(d,2),b=h[0],p=h[1];return l.a.createElement(l.a.Fragment,null,l.a.createElement("h2",{className:"has-text-weight-bold ml-2 mb-1"},"Coupons"),"coupon"!==b?l.a.createElement("button",{className:"button is-small mx-1 is-success is-outlined is-rounded",style:{marginBottom:"1rem"},onClick:function(){return p("coupon")}},l.a.createElement(v.a,{icon:A.faPlus,className:"mr-2"}),"Add Coupon"):l.a.createElement(we,{dataType:"coupon",setForm:p}),l.a.createElement("table",{className:"table is-fullwidth is-size-7 is-bordered has-text-centered vcenter-items my-4"},l.a.createElement("thead",null,l.a.createElement("tr",null,l.a.createElement("th",null,"Coupon ID"),l.a.createElement("th",null,"Coupon Code"),l.a.createElement("th",null,"Active"),l.a.createElement("th",null,"Discount Amount"),l.a.createElement("th",null,"Discount Percentage"),l.a.createElement("th",null,"Discount Shipping"),l.a.createElement("th",null,"Delivery Start Date"),l.a.createElement("th",null,"Expiration Date"),l.a.createElement("th",null,"Limits"),l.a.createElement("th",null,"Notes"),l.a.createElement("th",null,"Times Used"),l.a.createElement("th",null,"Recurring"),l.a.createElement("th",null,"Email ID"),l.a.createElement("th",null,"Business ID"))),l.a.createElement("tbody",null,i.map((function(e,t){return l.a.createElement(Oe,{key:t,index:t,coupon:e[1],id:e[0]})})))),l.a.createElement("h2",{className:"has-text-weight-bold ml-2 mt-6"},"Refunds"),"refund"!==b?l.a.createElement("button",{className:"button is-small mx-1 is-success is-outlined is-rounded",style:{marginBottom:"1rem"},onClick:function(){return p("refund")}},l.a.createElement(v.a,{icon:A.faPlus,className:"mr-2"}),"Add Refund"):l.a.createElement(we,{dataType:"refund",setForm:p}),l.a.createElement("table",{className:"table is-fullwidth is-size-7 is-bordered has-text-centered vcenter-items my-4"},l.a.createElement("thead",null,l.a.createElement("tr",null,l.a.createElement("th",null,"Refund ID"),l.a.createElement("th",null,"Created At"),l.a.createElement("th",null,"Email ID"),l.a.createElement("th",null,"Phone #"),l.a.createElement("th",null,"Image"),l.a.createElement("th",null,"Customer Notes"),l.a.createElement("th",null,"Refund Amount"),l.a.createElement("th",null,"Coupon ID"),l.a.createElement("th",null,"Admin Notes"))),l.a.createElement("tbody",null,m.map((function(e,t){return l.a.createElement(je,{key:t,index:t,refund:e[1],id:e[0]})})))))};function xe(){return l.a.createElement("div",{className:"level has-text-light-weight has-text-weight-light"},l.a.createElement("div",{className:"level-left is-split"},l.a.createElement("div",{className:"level-item"},"Min")),l.a.createElement("div",{className:"level-right is-split"},l.a.createElement("div",{className:"level-item"},"Max")))}function Ae(e){var t=e.constraint,a=e.business_id,n=(Object(o.a)(e,["constraint","business_id"]),"".concat(t.business_street).concat(t.business_unit?" ".concat(t.business_unit):""," \n                   ").concat(t.business_city," ").concat(t.business_state," ").concat(t.business_zip));return l.a.createElement("tr",null,l.a.createElement("td",null,a),l.a.createElement("td",null,t.business_name),l.a.createElement("td",null,n),l.a.createElement("td",null,t.business_phone),l.a.createElement("td",null,t.num_drivers),l.a.createElement("td",null,l.a.createElement("div",{className:"level"},l.a.createElement("span",{className:"level-item is-split left"},t.min_distance||"N/A"),l.a.createElement("span",{className:"level-item is-split"},t.max_distance||"N/A"))),l.a.createElement("td",null,l.a.createElement("div",{className:"level"},l.a.createElement("span",{className:"level-item is-split left"},t.min_time||"N/A"),l.a.createElement("span",{className:"level-item is-split"},t.max_time||"N/A"))),l.a.createElement("td",null,l.a.createElement("div",{className:"level"},l.a.createElement("span",{className:"level-item is-split left"},t.min_deliveries||"N/A"),l.a.createElement("span",{className:"level-item is-split"},t.max_deliveries||"N/A"))))}var ke=function(e){var t=e.constraints;Object(o.a)(e,["constraints"]),console.log("rendering constraints..");var a=Object(n.useState)(Object.entries(t)),r=Object(E.a)(a,2),c=r[0];return r[1],l.a.createElement("table",{className:"table is-fullwidth is-size-7 is-bordered has-text-centered vcenter-items"},l.a.createElement("thead",null,l.a.createElement("tr",null,l.a.createElement("th",null,"Constraint ID",l.a.createElement(v.a,{icon:A.faSort,className:"ml-1",onClick:function(){return function(e){switch(e){case"id":console.log(c);break;default:console.log("Sorting... invalid type")}}("id")}})),l.a.createElement("th",null,"Business Name"),l.a.createElement("th",null,"Business Address"),l.a.createElement("th",null,"Business Phone Number"),l.a.createElement("th",null,"Number of Drivers"),l.a.createElement("th",null,l.a.createElement("p",{style:{borderBottom:"1px solid lightgrey"}},"Distance per Driver"),l.a.createElement(xe,null)),l.a.createElement("th",null,l.a.createElement("p",{style:{borderBottom:"1px solid lightgrey"}},"Time per Driver"),l.a.createElement(xe,null)),l.a.createElement("th",null,l.a.createElement("p",{style:{borderBottom:"1px solid lightgrey"}},"Number of Deliveries"),l.a.createElement(xe,null)))),l.a.createElement("tbody",null,c.map((function(e,t){return l.a.createElement(Ae,{key:t,index:t,constraint:e[1],business_id:e[0]})}))))},Se=(a(87),ee.a.weekdays());function De(e,t){switch(t.type){case"today":return Object(b.a)(Object(b.a)(Object(b.a)(Object(b.a)({},e),e.day!==t.payload.today&&{day:t.payload.today}),e.week!==t.payload.toweek&&{week:t.payload.toweek}),-1===e.index&&{index:t.payload.slot});case"day-shift":var a=e.day.clone().add(t.payload.direction,"d"),n=e.day.week(),l=a.week();return Object(b.a)(Object(b.a)(Object(b.a)({},e),{},{day:a},e.weeknextWeek!==n&&{week:l}),t.payload.today.isSame(a,"d")?{index:t.payload.slot}:{index:-1});case"week-shift":var r=e.day.clone().add(7*t.payload.direction,"d");return Object(b.a)(Object(b.a)({},e),{},{day:r,week:r.week()},t.payload.today.isSame(r,"d")?{index:t.payload.slot}:{index:-1});case"time-change":return Object(b.a)(Object(b.a)({},e),{},{index:t.payload});default:return e}}function Be(e){return l.a.createElement(l.a.Fragment,null,e.items.map((function(t,a){return l.a.createElement("td",{key:a,className:e.index===a?" is-today"+(e.isLast?"-end":""):""},e.hasRange?l.a.createElement(Ie,{min:t,max:t}):l.a.createElement("div",{className:"has-text-centered"},t))})))}function Ie(e){return l.a.createElement("div",{className:"level has-text-light-weight"+(e.isHeader?" has-text-weight-light":"")},l.a.createElement("div",{className:"level-left is-split"},l.a.createElement("div",{className:"level-item"},e.min)),l.a.createElement("div",{className:"level-right is-split"},l.a.createElement("div",{className:"level-item"},e.max)))}var Re=function(e){console.log("rendering view..");var t=e.times&&Object.keys(e.times).map((function(t){return[e.times[t]]})),a="day"===e.type?t:Se,r=ee()(),c=r.week(),i=Object(n.useReducer)(De,{day:r,week:c,index:"day"===e.type?e.timeSlot:r.weekday()}),s=Object(E.a)(i,2),o=s[0],u=s[1],m=o.day.weekday();Object(n.useEffect)((function(){o.index!==e.timeSlot&&"day"===e.type&&o.day.isSame(r,"d")&&u({type:"time-change",payload:e.timeSlot})}),[e.timeSlot]);for(var d=[],h=[],b=[],p=[],f=[],_=[],y=0;y<a.length;y++)d.push("N/A");for(var g=0;g<a.length;g++)h.push("N/A");for(var N=0;N<a.length;N++)b.push("N/A");for(var O=0;O<a.length;O++)p.push("N/A");for(var j=0;j<a.length;j++)f.push("N/A");for(var w=0;w<a.length;w++)_.push("N/A");var C=function(t){var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n={today:r,slot:"day"===t?e.timeSlot:m,direction:a};u({type:"".concat(t,"-shift"),payload:n})};return l.a.createElement("div",{className:"modal"+(e.visible?" is-active":"")},l.a.createElement("div",{className:"modal-background",onClick:e.onClick}),l.a.createElement("div",{className:"modal-card",style:{width:"80vw"}},l.a.createElement("header",{className:"modal-card-head"},l.a.createElement("div",{className:"buttons has-addons",style:{minWidth:"220px"}},l.a.createElement("button",{className:"button mr-4",onClick:function(){return function(t){var a={type:t,today:r,toweek:c,slot:"day"===t?e.timeSlot:m};u({type:"today",payload:a})}(e.type)}},"Today"),l.a.createElement("button",{className:"button",onClick:function(){return C(e.type,-1)}},l.a.createElement(v.a,{icon:A.faChevronLeft})),l.a.createElement("button",{className:"button",onClick:function(){return C(e.type)}},l.a.createElement(v.a,{icon:A.faChevronRight})),l.a.createElement("button",{className:"button is-small is-static ml-4",style:{width:"150px"}},"day"===e.type?"".concat(Se[m],": ").concat(o.day.format("MM-DD-YYYY")):"Week ".concat(o.week," - ").concat(o.day.clone().weekday(6).format("YYYY"))))),l.a.createElement("section",{className:"modal-card-body",style:{padding:"0"}},l.a.createElement("table",{className:"table is-fullwidth is-bordered is-view",style:{minWidth:"880px"}},l.a.createElement("thead",null,l.a.createElement("tr",null,l.a.createElement("th",null,"day"===e.type?"Time Window":"Day"),a.map((function(t,a){return l.a.createElement("th",{className:"has-text-centered"+(o.index===a?" is-today":""),key:a},l.a.createElement("p",{style:{borderBottom:"1px solid lightgrey"}},t+("week"===e.type?" [".concat(o.day.clone().add(a-m,"d").format("MM/DD"),"]"):"")),l.a.createElement(Ie,{min:"Min",max:"Max",isHeader:!0}))})))),l.a.createElement("tbody",null,l.a.createElement("tr",null,l.a.createElement("th",{title:"Current number of drivers"},"# Drivers"),l.a.createElement(Be,{items:d,index:o.index})),l.a.createElement("tr",null,l.a.createElement("th",{title:"Total distance driven"},"Dist. Driven"),l.a.createElement(Be,{items:h,index:o.index})),l.a.createElement("tr",null,l.a.createElement("th",{title:"Number of deliveries made"},"# Deliveries"),l.a.createElement(Be,{items:b,index:o.index,hasRange:!0})),l.a.createElement("tr",null,l.a.createElement("th",{title:"Time spent to deliver each product"},"Time/Delivery"),l.a.createElement(Be,{items:p,index:o.index,hasRange:!0})),l.a.createElement("tr",null,l.a.createElement("th",{title:"Time spent at each product destination"},"Time/Location"),l.a.createElement(Be,{items:f,index:o.index,hasRange:!0})),l.a.createElement("tr",null,l.a.createElement("th",{title:"Total time spent"},"Total Time"),l.a.createElement(Be,{items:_,index:o.index,hasRange:!0,isLast:!0}))))),l.a.createElement("footer",{className:"modal-card-foot"})))},Te={isLoading:!0,filter:void 0,routes:{},routes_dates:[],routes_times:[],drivers:{},businesses:{},customers:{},vehicles:{},purchases:{},payments:{},coupons:{},refunds:{},constraints:{}};function Qe(e,t){switch(t.type){case"load":for(var a=[],n=0,l=Object.values(t.payload.data.routes);n<l.length;n++){var r=l[n];r["Business Name"]=t.payload.data.businesses[r.business_id]?t.payload.data.businesses[r.business_id].name:null,r["Driver Name"]=t.payload.data.drivers[r.driver_id]?t.payload.data.drivers[r.driver_id].first_name+" "+t.payload.data.drivers[r.driver_id].last_name:null;var c,i=Object(p.a)(r.route_data);try{for(i.s();!(c=i.n()).done;){var s=c.value;s.customer_first_name=t.payload.data.customers[s.customer_id]?t.payload.data.customers[s.customer_id].first_name:" ",s.customer_last_name=t.payload.data.customers[s.customer_id]?t.payload.data.customers[s.customer_id].last_name:" "}}catch(u){i.e(u)}finally{i.f()}a.includes(r.date)||a.push(r.date)}return Object(b.a)(Object(b.a)(Object(b.a)({},e),t.payload.data),{},{routes_dates:a,routes_times:["1","2","3","4","5"]});case"filter":return Object(b.a)(Object(b.a)({},e),{},{filter:t.payload.filter});case"update-list":return Object(b.a)(Object(b.a)({},e),{},Object(h.a)({},t.payload.dataType,t.payload.value));case"toggle-visibility":return Object(b.a)(Object(b.a)({},e),{},Object(h.a)({},t.payload.type,Object(b.a)(Object(b.a)({},e[t.payload.type]),{},Object(h.a)({},t.payload.id,Object(b.a)(Object(b.a)({},e[t.payload.type][t.payload.id]),{},{visible:!e[t.payload.type][t.payload.id].visible})))));case"update-route-drivers":var o=Object(b.a)({},e.routes);return Object.entries(t.payload.route_drivers).forEach((function(t){o[t[0]]=Object(b.a)(Object(b.a)({},e.routes[t[0]]),{},{driver_id:t[1].id,"Driver Name":t[1].name})})),console.log(o),Object(b.a)(Object(b.a)({},e),{},{routes:o});default:return e}}function Le(e){console.log("rendering header..");return l.a.createElement("div",{className:"header-parent"},l.a.createElement("div",{className:"header-main"},l.a.createElement("img",{className:"has-text-left",src:N.a,alt:"Just Delivered",style:{alignSelf:"center",maxHeight:"5vh"}}),l.a.createElement("h1",{className:"has-text-centered",style:{width:"100%",fontSize:"3vh"}},"ADMIN DASHBOARD"),["Delivery","Drivers","Businesses","Customers","Vehicles","Purchases","Payments","Coupons","Constraints"].map((function(t,a){return l.a.createElement("button",{key:a,className:"button is-lightgrey is-sharp is-tilted-right header-button",onClick:function(){return function(t){e.tab!==t&&(e.dispatch({type:"filter",payload:{filter:void 0}}),e.changeTab(t))}(a)},style:{backgroundColor:e.tab===a&&"yellow"}},t)})),l.a.createElement("button",{className:"button is-white is-fullheight ml-2",onClick:function(){return e.handleBurger()}},l.a.createElement(v.a,{icon:A.faBars}))),l.a.createElement("ul",{id:"selections",className:"header-burger"},l.a.createElement("li",null,l.a.createElement("button",{className:"button is-white is-fullwidth",onClick:e.handleDayView},"Day View")),l.a.createElement("li",null,l.a.createElement("button",{className:"button is-white is-fullwidth",onClick:e.handleWeekView},"Week View"))))}function Me(e){console.log("rendering times..");var t=Object(n.useState)({date:!1,time:!1}),a=Object(E.a)(t,2),r=a[0],c=a[1];return l.a.createElement("div",{className:"columns routes",style:{margin:0}},l.a.createElement("div",{className:"column"},l.a.createElement("div",{className:"dropdown ml-2"+(r.date?" is-active":"")},l.a.createElement("div",{className:"dropdown-trigger"},l.a.createElement("button",{className:"button is-small is-fullwidth",onClick:function(){return c((function(e){return Object(b.a)(Object(b.a)({},e),{},{date:!e.date})}))},"aria-haspopup":"true","aria-controls":"dropdown-menu"},"Date: ",e.dates.length?e.dates[0]:"NONE",l.a.createElement(v.a,{icon:A.faCaretDown,className:"ml-2"}))),l.a.createElement("div",{className:"dropdown-menu",style:{paddingTop:0},id:"dropdown-menu",role:"menu"},l.a.createElement("div",{className:"dropdown-content"},e.dates.map((function(t,a){return l.a.createElement("button",{key:a,className:"button is-small is-white dropdown-item",onClick:function(){return function(t){e.dateSlot!==t&&e.setDateSlot(t),c((function(e){return Object(b.a)(Object(b.a)({},e),{},{date:!1})}))}(a)}},t)})))))),l.a.createElement("div",{className:"column"},l.a.createElement("div",{className:"dropdown ml-2"+(r.time?" is-active":"")},l.a.createElement("div",{className:"dropdown-trigger"},l.a.createElement("button",{className:"button is-small",onClick:function(){return c((function(e){return Object(b.a)(Object(b.a)({},e),{},{time:!e.time})}))},"aria-haspopup":"true","aria-controls":"dropdown-menu"},"Time: ",e.times.length?e.times[e.timeSlot]:"NONE",l.a.createElement(v.a,{icon:A.faCaretDown,className:"ml-2"}))),l.a.createElement("div",{className:"dropdown-menu",style:{paddingTop:0},id:"dropdown-menu",role:"menu"},l.a.createElement("div",{className:"dropdown-content"},e.times.map((function(t,a){return l.a.createElement("button",{key:a,className:"button is-small is-white dropdown-item",onClick:function(){return function(t){e.timeSlot!==t&&e.setTimeSlot(t),c((function(e){return Object(b.a)(Object(b.a)({},e),{},{time:!1})}))}(a)}},t)})))))))}function ze(e){var t=e.data,a=e.header,r=Object(o.a)(e,["data","header"]),c=Object(n.useState)(!1),i=Object(E.a)(c,2),s=i[0],u=i[1],m=Object(n.useState)(),d=Object(E.a)(m,2),h=d[0],p=d[1],f=Object(n.useState)([]),_=Object(E.a)(f,2),y=_[0],g=_[1];console.log(y,h),Object(n.useEffect)((function(){var e;switch(a){case 0:g(["Business Name"]),e=t.routes;break;case 1:e=t.drivers;break;case 2:e=t.businesses;break;case 3:e=t.customers;break;case 4:e=t.vehicles;break;case 5:e=t.purchases;break;case 6:e=t.payments;break;case 7:e=t.coupons;break;case 8:e=t.constraints}document.getElementById("filter-value").value&&(document.getElementById("filter-value").value=""),p(e)}),[a]);var N=function(e){if(e){console.log(Object.keys(t)[a+2]);var n={type:Object.keys(t)[a+2],option:e,value:void 0};console.log(n),r.dispatch({type:"filter",payload:{filter:n}})}else r.dispatch({type:"filter",payload:{filter:void 0}});document.getElementById("filter-value").value&&(document.getElementById("filter-value").value=""),u(!1)};return l.a.createElement("div",{className:"level is-mobile",style:{height:"5vh",margin:0,justifyContent:"end"}},l.a.createElement("div",{className:"level-item",style:{flexGrow:0}},l.a.createElement("div",{className:"dropdown"+(s?" is-active":"")},l.a.createElement("div",{className:"dropdown-trigger"},l.a.createElement("button",{className:"button is-small",onClick:function(){return u((function(e){return!e}))},"aria-haspopup":"true","aria-controls":"dropdown-menu"},l.a.createElement("span",null,"Filter: ",t.filter?t.filter.option:"NONE"),l.a.createElement(v.a,{icon:A.faCaretDown,className:"ml-2"}))),l.a.createElement("div",{className:"dropdown-menu",style:{paddingTop:0},id:"dropdown-menu",role:"menu"},l.a.createElement("div",{className:"dropdown-content"},l.a.createElement("button",{className:"button is-small is-white dropdown-item",disabled:!t.filter,onClick:function(){return N()}},"NONE"),l.a.createElement("hr",{className:"dropdown-divider"}),h&&Object.keys(Object.values(h)[0]||{}).map((function(e,a){return l.a.createElement(l.a.Fragment,{key:a},y.includes(e)&&l.a.createElement("button",{className:"button is-small is-white dropdown-item",disabled:t.filter&&t.filter.option===e,onClick:function(){return N(e)}},e))})))))),l.a.createElement("div",{className:"level-item",style:{flexGrow:0}},l.a.createElement("form",{onSubmit:function(e){if(e.preventDefault(),document.getElementById("filter-value").value){var a=Object(b.a)(Object(b.a)({},t.filter),{},{value:document.getElementById("filter-value").value});r.dispatch({type:"filter",payload:{filter:a}})}}},l.a.createElement("div",{className:"level is-mobile"},l.a.createElement("div",{className:"level-item px-2"},l.a.createElement("input",{className:"input is-small",id:"filter-value",type:"text",disabled:!t.filter})),l.a.createElement("div",{className:"level-item"},l.a.createElement("button",{className:"button is-small",type:"submit",disabled:!t.filter},l.a.createElement(v.a,{icon:A.faCheck})))))))}var Fe=function(){console.log("rendering page..");var e=Object(n.useReducer)(Qe,Te),t=Object(E.a)(e,2),a=t[0],r=t[1];console.log(a);var c=Object(n.useState)(Number(window.localStorage.getItem("timeSlot"))||0),i=Object(E.a)(c,2),s=i[0],o=i[1],u=Object(n.useState)(Number(window.localStorage.getItem("dateSlot"))||0),h=Object(E.a)(u,2),v=h[0],f=h[1],_=Object(n.useState)(Number(window.localStorage.getItem("headerTab"))||0),y=Object(E.a)(_,2),g=y[0],N=y[1],O=Object(n.useState)({}),j=Object(E.a)(O,2),w=j[0],C=j[1];Object(n.useEffect)((function(){window.localStorage.setItem("headerTab",g)}),[g]),Object(n.useEffect)((function(){window.localStorage.setItem("timeSlot",s)}),[s]),Object(n.useEffect)((function(){window.localStorage.setItem("dateSlot",v)}),[v]),Object(n.useEffect)((function(){Promise.allSettled([W.a.get(U+"getRoutes").then((function(e){var t,a=e.data.result.result,n=0,l={},r=Object(p.a)(a);try{for(r.s();!(t=r.n()).done;){var c=t.value,i=JSON.parse(c.route_delivery_info),s=c.route_id,o=[i[0].coordinates.latitude,i[0].coordinates.longitude],u={to:o,customer_id:i[0].customer_id,address:i[0].delivery_street};s in l?(u.from=l[s].route_data[l[s].route_data.length-1].to,l[s].route_data.push(u)):(n<c.route_option&&(n=c.route_option),u.from=[o.latitude,o.longitude],l[s]={route_option:c.route_option,business_id:c.route_business_id,driver_id:c.route_driver_id,driver_num:c.route_driver_num,distance:c.route_distance,date:c.shipment_date,visible:!0,route_data:[u]})}}catch(h){r.e(h)}finally{r.f()}var m=0,d=1;for(var E in l)l[E].route_data.shift(),d!=l[E].route_option&&(1==l[E].route_option?(d=1,m=0):(d++,m++)),l[E].route_color=V(n,m);return l})),W.a.get(U+"Drivers").then((function(e){var t,a=e.data.result.result,n={},l=Object(p.a)(a);try{for(l.s();!(t=l.n()).done;){var r=t.value,c=r.driver_uid,i={visible:!0,rating:r.driver_rating,first_name:r.driver_first_name,last_name:r.driver_last_name,weekly_workload:"N/A",drivers_license:r.driver_license,drivers_license_exp:r.driver_license_exp,vehicle_types:r.driver_vehicle_types,emergency_contact_name:r.emergency_contact_name,emergency_contact_phone:r.emergency_contact_phone,emergency_contact_relationship:r.emergency_contact_relationship,preferred_routes:"N/A",available_hours:r.driver_available_hours,scheduled_hours:r.driver_scheduled_hours,street:r.driver_street,unit:r.driver_unit,city:r.driver_city,state:r.driver_state,zip:r.driver_zip,latitude:Number(r.driver_latitude),longitude:Number(r.driver_longitude),insurance_carrier:r.driver_insurance_carrier,insurance_number:r.driver_insurance_num,insurance_expiration:r.driver_insurance_exp,bank_routing_info:r.bank_routing_info,bank_account_info:r.bank_account_info,ssn:r.driver_ssn,password:r.driver_password,phone:r.driver_phone_num,phone2:r.driver_phone_num2,email:r.driver_email,business_id:r.business_id,hourly_rate:r.driver_hourly_rate,delivery_fee:r.driver_delivery_fee};n[c]=i}}catch(s){l.e(s)}finally{l.f()}return n})),W.a.get(U+"Businesses").then((function(e){var t,a=e.data.result.result,n={},l=Object(p.a)(a);try{for(l.s();!(t=l.n()).done;){var r=t.value,c=r.business_uid,i={visible:!0,zones:void 0,name:r.business_name,type:r.business_type,description:r.business_desc,registered:r.business_created_at,image:r.business_image,license:r.business_license,password:r.business_password,EIN:r.business_EIN,USDOT:r.business_USDOT,WAUBI:r.business_WAUBI,hours:r.business_hours,delivery_hours:r.business_delivery_hours,accepting_hours:r.business_accepting_hours,available_zones:r.available_zones,street:r.business_address,unit:r.business_unit,city:r.business_city,state:r.business_state,zip:r.business_zip,latitude:Number(r.business_latitude),longitude:Number(r.business_longitude),contact_first_name:r.business_contact_first_name,contact_last_name:r.business_contact_last_name,phone:r.business_phone_num,phone2:r.business_phone_num2,email:r.business_email,delivery:r.delivery,can_cancel:r.can_cancel,reusable:r.reusable,notification_approval:r.notification_approval,notification_device_id:r.notification_device_id};n[c]=i}}catch(s){l.e(s)}finally{l.f()}return n})),W.a.get(U+"Customers").then((function(e){var t,a=e.data.result.result,n={},l=Object(p.a)(a);try{for(l.s();!(t=l.n()).done;){var r=t.value,c=r.customer_uid,i={visible:!0,first_name:r.customer_first_name||" ",last_name:r.customer_last_name||" ",phone:r.customer_phone_num,SMS_frequency:r.SMS_freq_preference,SMS_last_notification:r.SMS_last_notification,street:r.customer_address,unit:r.customer_unit,city:r.customer_city,state:r.customer_state,zip:r.customer_zip,latitude:Number(r.customer_lat),longitude:Number(r.customer_long),email:r.customer_email,notification_approval:r.notification_approval,notification_id:r.notification_device_id,created_at:r.customer_created_at,verified:Number(r.email_verified),password_salt:r.password_salt,password_hash:r.password_hashed,password_algorithm:r.password_algorithm,referral_source:r.referral_source,role:r.role,last_update:r.customer_updated_at,customer_rep:r.customer_rep,user_social_media:r.user_social_media,user_access_token:r.user_access_token,user_refresh_token:r.user_refresh_token,route_id:r.route_id};n[c]=i}}catch(s){l.e(s)}finally{l.f()}return n})),W.a.get(U+"getVehicles").then((function(e){console.log("vehicles resp:",e);var t,a=e.data.result.result,n={},l=Object(p.a)(a);try{for(l.s();!(t=l.n()).done;){var r=t.value,c=r.vehicle_uid,i={vehicle_make:r.vehicle_make,vehicle_model:r.vehicle_model,vehicle_year:r.vehicle_year,insurance_carrier:r.vehicle_ins_carrier,insurance_number:r.vehicle_ins_policy_num,insurance_expiration:r.vehicle_ins_exp_date,registration:r.vehicle_registration,registration_expiration:r.vehicle_registration_exp,drivers:r.drivers};n[c]=i}}catch(s){l.e(s)}finally{l.f()}return n})),W.a.get(U+"Purchases").then((function(e){var t,a=e.data.result.result,n={},l=Object(p.a)(a);try{for(l.s();!(t=l.n()).done;){var r=t.value,c=r.purchase_uid,i={customer_id:r.pur_customer_uid,business_id:r.pur_business_uid,delivery_first_name:r.delivery_first_name,delivery_last_name:r.delivery_last_name,delivery_phone:r.delivery_phone_num,delivery_email:r.delivery_email,delivery_street:r.delivery_address,delivery_unit:r.delivery_unit,delivery_city:r.delivery_city,delivery_state:r.delivery_state,delivery_zip:r.delivery_zip,delivery_latitude:Number(r.delivery_latitude),delivery_longitude:Number(r.delivery_longitude),items:r.items,purchase_date:r.purchase_date,order_instructions:r.order_instructions,purchase_notes:r.purchase_notes,delivery_instructions:r.delivery_instructions,order_type:r.order_type,purchase_status:r.purchase_status};n[c]=i}}catch(s){l.e(s)}finally{l.f()}return n})),W.a.get(U+"Payments").then((function(e){console.log("payment resp:",e);var t,a=e.data.result.result,n={},l=Object(p.a)(a);try{for(l.s();!(t=l.n()).done;){var r=t.value,c=r.payment_uid,i={purchase_id:r.pay_purchase_uid,payment_time_stamp:r.payment_time_stamp,start_delivery_date:r.start_delivery_date,coupon_id:r.pay_coupon_id,amount_due:r.amount_due,amount_discount:r.amount_discount,amount_paid:r.amount_paid,info_is_Addon:r.info_is_Addon,credit_card_num:r.cc_num,credit_card_expiration:r.cc_exp_date,credit_card_cvv:r.cc_cvv,credit_card_zip:r.cc_zip,charge_id:r.charge_id,payment_type:r.payment_type};n[c]=i}}catch(s){l.e(s)}finally{l.f()}return n})),W.a.get(U+"getCoupons").then((function(e){var t,a=e.data.result.result,n={},l=Object(p.a)(a);try{for(l.s();!(t=l.n()).done;){var r=t.value,c=r.coupon_uid,i={code:r.coupon_id,valid:r.valid,discount_percent:r.discount_percent,discount_amount:r.discount_amount,discount_shipping:r.discount_shipping,expire_date:r.expire_date,limits:r.limits,notes:r.notes,num_used:r.num_used,recurring:r.recurring,email:r.email_id,business_id:r.cup_business_uid};n[c]=i}}catch(s){l.e(s)}finally{l.f()}return n})),W.a.get(U+"getRefunds").then((function(e){console.log("refunds resp:",e);var t,a=e.data.result.result,n={},l=Object(p.a)(a);try{for(l.s();!(t=l.n()).done;){var r=t.value,c=r.refund_uid,i={created_at:r.created_at,email:r.email_id,phone:r.phone_num,image:r.image_url,customer_note:r.customer_note,admin_note:r.admin_note,refund_amount:r.refund_amount,coupon_id:r.ref_coupon_id};n[c]=i}}catch(s){l.e(s)}finally{l.f()}return n}))]).then(function(){var e=Object(d.a)(m.a.mark((function e(t){var a,n;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,H(t[2].value);case 2:return e.next=4,q(t[2].value);case 4:a=e.sent,n=Object(b.a)(Object(b.a)(Object(b.a)(Object(b.a)(Object(b.a)(Object(b.a)(Object(b.a)(Object(b.a)(Object(b.a)(Object(b.a)({isLoading:!1},t[0].value&&{routes:t[0].value}),t[1].value&&{drivers:t[1].value}),t[2].value&&{businesses:t[2].value}),t[3].value&&{customers:t[3].value}),t[4].value&&{vehicles:t[4].value}),t[5].value&&{purchases:t[5].value}),t[6].value&&{payments:t[6].value}),t[7].value&&{coupons:t[7].value}),t[8].value&&{refunds:t[8].value}),{},{constraints:a}),r({type:"load",payload:{data:n}});case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())}),[]);var x=function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];console.log("Burger interaction..");var t=document.getElementById("selections");t.style.display=e||"block"===t.style.display?"none":"block"},A=Object(n.useState)("none"),k=Object(E.a)(A,2),S=k[0],D=k[1],B=function(e){console.log("Open day view.."),x(!0),D(S===e?"none":e)};return l.a.createElement(l.a.Fragment,null,l.a.createElement(Le,{tab:g,changeTab:N,handleBurger:x,handleDayView:function(){return B("day")},handleWeekView:function(){return B("week")},dispatch:r}),l.a.createElement(Re,{type:"day",times:a.routes_times,timeSlot:s,visible:"day"===S,onClick:function(){return B("day")}}),l.a.createElement(Re,{type:"week",visible:"week"===S,onClick:function(){return B("week")}}),a.isLoading?l.a.createElement("div",{className:"loading-screen"}):l.a.createElement("div",{className:"map-page"},l.a.createElement("div",{className:"columns",style:{margin:"auto"}},g<4&&l.a.createElement("div",{className:"column is-half",style:{padding:"0"}},l.a.createElement(Me,{times:a.routes_times,dates:a.routes_dates,timeSlot:s,setTimeSlot:o,dateSlot:v,setDateSlot:f}),l.a.createElement("div",{className:"sticky"},l.a.createElement(F,{header:g,routes:a.routes,drivers:a.drivers,businesses:a.businesses,customers:a.customers,filter:a.filter,selectedLocation:w,setSelectedLocation:C,dispatch:r}))),l.a.createElement("div",{className:"column"+(g<4?" is-half":" is-full"),style:{padding:"0 0.75rem"}},l.a.createElement(ze,{data:a,header:g,dispatch:r}),l.a.createElement("div",{className:"box"+(g<4?" map":" no-map")},function(){switch(s&&(Math.floor(s)!==s||s<0||s>a.routes_times.length-1)&&o(0),v&&(Math.floor(v)!==v||v<0||v>a.routes_dates.length-1)&&f(0),g){case 0:return l.a.createElement(K,{routes:a.routes,drivers:a.drivers,filter:a.filter,selectedLocation:w,setSelectedLocation:C,dispatch:r});case 1:return l.a.createElement(oe,{drivers:a.drivers,routes:a.routes,filter:a.filter,dispatch:r});case 2:return l.a.createElement(Ee,{businesses:a.businesses,filter:a.filter,dispatch:r});case 3:return l.a.createElement(be,{customers:a.customers,filter:a.filter,dispatch:r});case 4:return l.a.createElement(ve,{vehicles:a.vehicles});case 5:return l.a.createElement(ye,{purchases:a.purchases});case 6:return l.a.createElement(Ne,{payments:a.payments});case 7:return l.a.createElement(Ce,{coupons:a.coupons,refunds:a.refunds});case 8:return l.a.createElement(ke,{constraints:a.constraints});default:N(0)}}())))))};var Pe=function(){return console.log("rendering app.."),l.a.createElement(i.a,{basename:"Delivery-App"},l.a.createElement(s.c,null,l.a.createElement(s.a,{exact:!0,path:"/",component:Fe})))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));a(91);c.a.render(l.a.createElement(l.a.StrictMode,null,l.a.createElement(Pe,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[57,1,2]]]);
//# sourceMappingURL=main.fce5e7eb.chunk.js.map